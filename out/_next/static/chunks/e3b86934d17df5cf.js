(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,345740,121635,e=>{"use strict";let t=Symbol(),a=Symbol(),r=Object.getPrototypeOf,n=new WeakMap,o=e=>e&&(n.has(e)?n.get(e):r(e)===Object.prototype||r(e)===Array.prototype),s=(e,t=!0)=>{n.set(e,t)},i={get url(){return`file://${e.P("pixsim/node_modules/.pnpm/valtio@2.1.7_@types+react@19.2.7_react@19.2.3/node_modules/valtio/esm/vanilla.mjs")}`}},c=e=>"object"==typeof e&&null!==e,l=(e,t)=>{let a=u.get(e);if((null==a?void 0:a[0])===t)return a[1];let r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return s(r,!0),u.set(e,[t,r]),Reflect.ownKeys(e).forEach(t=>{if(Object.getOwnPropertyDescriptor(r,t))return;let a=Reflect.get(e,t),{enumerable:n}=Reflect.getOwnPropertyDescriptor(e,t),o={value:a,enumerable:n,configurable:!0};if(p.has(a))s(a,!1);else if(d.has(a)){let[e,t]=d.get(a);o.value=l(e,t())}Object.defineProperty(r,t,o)}),Object.preventExtensions(r)},d=new WeakMap,p=new WeakSet,u=new WeakMap,C=[1],h=new WeakMap,g=Object.is;function m(e={}){let t,r,n;if(!c(e))throw Error("object required");let s=h.get(e);if(s)return s;let l=C[0],u=new Set,f=(e,t=++C[0])=>{l!==t&&(w=l=t,u.forEach(a=>a(e,t)))},w=l,E=e=>(t,a)=>{let r=[...t];r[1]=[e,...r[1]],f(r,a)},S=new Map,A=!0,N=new Proxy(e,(t=()=>A,r=(e,t)=>{let a=!p.has(t)&&d.get(t);if(a){if((i.env?i.env.MODE:void 0)!=="production"&&S.has(e))throw Error("prop listener already exists");if(u.size){let t=a[2](E(e));S.set(e,[a,t])}else S.set(e,[a])}},n=e=>{var t;let a=S.get(e);a&&(S.delete(e),null==(t=a[1])||t.call(a))},{deleteProperty(e,t){let a=Reflect.get(e,t);n(t);let r=Reflect.deleteProperty(e,t);return r&&f(["delete",[t],a]),r},set(e,s,i,l){var u;let C,w=!t()&&Reflect.has(e,s),E=Reflect.get(e,s,l);if(w&&(g(E,i)||h.has(i)&&g(E,h.get(i))))return!0;n(s),c(i)&&(i=o(u=i)&&u[a]||i);let S=!d.has(i)&&c(C=i)&&!p.has(C)&&(Array.isArray(C)||!(Symbol.iterator in C))&&!(C instanceof WeakMap)&&!(C instanceof WeakSet)&&!(C instanceof Error)&&!(C instanceof Number)&&!(C instanceof Date)&&!(C instanceof String)&&!(C instanceof RegExp)&&!(C instanceof ArrayBuffer)&&!(C instanceof Promise)?m(i):i;return r(s,S),Reflect.set(e,s,S,l),f(["set",[s],i,E]),!0}}));h.set(e,N);let y=[e,(e=C[0])=>(w!==e&&(w=e,S.forEach(([t])=>{let a=t[1](e);a>l&&(l=a)})),l),e=>(u.add(e),1===u.size&&S.forEach(([e,t],a)=>{if((i.env?i.env.MODE:void 0)!=="production"&&t)throw Error("remove already exists");let r=e[2](E(a));S.set(a,[e,r])}),()=>{u.delete(e),0===u.size&&S.forEach(([e,t],a)=>{t&&(t(),S.set(a,[e]))})})];return d.set(N,y),Reflect.ownKeys(e).forEach(t=>{let a=Object.getOwnPropertyDescriptor(e,t);"value"in a&&a.writable&&(N[t]=e[t])}),A=!1,N}function f(e,t,a){let r,n=d.get(e);(i.env?i.env.MODE:void 0)==="production"||n||console.warn("Please use proxy object");let o=[],s=n[2],c=!1,l=s(e=>{(o.push(e),a)?t(o.splice(0)):r||(r=Promise.resolve().then(()=>{r=void 0,c&&t(o.splice(0))}))});return c=!0,()=>{c=!1,l()}}function w(e){let t=d.get(e);(i.env?i.env.MODE:void 0)==="production"||t||console.warn("Please use proxy object");let[a,r]=t;return l(a,r())}function E(e){return p.add(e),e}function S(){return{proxyStateMap:d,refSet:p,snapCache:u,versionHolder:C,proxyCache:h}}function A(e,t,a,r){let n=e[t];return f(e,()=>{let r=e[t];Object.is(n,r)||a(n=r)},r)}e.s(["proxy",()=>m,"ref",()=>E,"snapshot",()=>w,"subscribe",()=>f,"unstable_getInternalStates",()=>S],345740),Symbol();let{proxyStateMap:N,snapCache:y}=S();function I(e){let t=[],a=0,r=new Map,n=new WeakMap,o=e=>n.get(e)||r;if(e){if("function"!=typeof e[Symbol.iterator])throw TypeError("proxyMap:\n	initial state must be iterable\n		tip: structure should be [[key, value]]");for(let[n,o]of e)r.set(n,a),t[a++]=o}let s={data:t,index:a,epoch:0,get size(){return N.has(this)||(()=>{let e=y.get(s),t=null==e?void 0:e[1];if(t&&!n.has(t)){let e=new Map(r);n.set(t,e)}})(),o(this).size},get(e){let t=o(this).get(e);return void 0===t?void this.epoch:this.data[t]},has(e){let t=o(this);return this.epoch,t.has(e)},set(e,t){if(!N.has(this))throw Error("Cannot perform mutations on a snapshot");let a=r.get(e);return void 0===a?(r.set(e,this.index),this.data[this.index++]=t):this.data[a]=t,this.epoch++,this},delete(e){if(!N.has(this))throw Error("Cannot perform mutations on a snapshot");let t=r.get(e);return void 0!==t&&(delete this.data[t],r.delete(e),this.epoch++,!0)},clear(){if(!N.has(this))throw Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(e){this.epoch,o(this).forEach((t,a)=>{e(this.data[t],a,this)})},*entries(){for(let[e,t]of(this.epoch,o(this)))yield[e,this.data[t]]},*keys(){for(let e of(this.epoch,o(this).keys()))yield e},*values(){for(let e of(this.epoch,o(this).values()))yield this.data[e]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},i=m(s);return Object.defineProperties(i,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(i),i}let{proxyStateMap:v,snapCache:k}=S();e.s(["proxyMap",()=>I,"subscribeKey",()=>A],121635)},330699,e=>{"use strict";var t=e.i(76093);let a={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],SOLANA_SPL_TOKEN_ADDRESSES:{SOL:"So11111111111111111111111111111111111111112"},HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(void 0!==t.default&&void 0!==t.default.env?t.default.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}},IS_DEVELOPMENT:void 0!==t.default&&!1};e.s(["ConstantsUtil",0,a])},932362,e=>{"use strict";var t=e.i(330699);e.s(["AVAILABLE_NAMESPACES",0,["eip155","solana","polkadot","bip122","cosmos","sui","stacks"],"NetworkUtil",0,{caipNetworkIdToNumber:e=>e?Number(e.split(":")[1]):void 0,parseEvmChainId(e){return"string"==typeof e?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace:(e,t)=>e?.filter(e=>e.chainNamespace===t)||[],getFirstNetworkByNamespace(e,t){return this.getNetworksByNamespace(e,t)[0]},getNetworkNameByCaipNetworkId(e,a){if(!a)return;let r=e.find(e=>e.caipNetworkId===a);if(r)return r.name;let[n]=a.split(":");return t.ConstantsUtil.CHAIN_NAME_MAP?.[n]||void 0}}])},535225,e=>{"use strict";e.s(["ParseUtil",0,{validateCaipAddress(e){if(e.split(":")?.length!==3)throw Error("Invalid CAIP Address");return e},parseCaipAddress(e){let t=e.split(":");if(3!==t.length)throw Error(`Invalid CAIP-10 address: ${e}`);let[a,r,n]=t;if(!a||!r||!n)throw Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:a,chainId:r,address:n}},parseCaipNetworkId(e){let t=e.split(":");if(2!==t.length)throw Error(`Invalid CAIP-2 network id: ${e}`);let[a,r]=t;if(!a||!r)throw Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:a,chainId:r}}}])},944617,e=>{"use strict";var t=e.i(76093),a=e.i(330699);let r=(void 0!==t.default&&void 0!==t.default.env?t.default.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",n={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:r,SECURE_SITE_DASHBOARD:`${r}/dashboard`,SECURE_SITE_FAVICON:`${r}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[a.ConstantsUtil.CHAIN.EVM,a.ConstantsUtil.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[a.ConstantsUtil.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM,a.ConstantsUtil.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM,a.ConstantsUtil.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[a.ConstantsUtil.CHAIN.EVM,a.ConstantsUtil.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}};e.s(["ConstantsUtil",0,n,"MELD_PUBLIC_KEY",0,"WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU","ONRAMP_PROVIDERS",0,[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}]])},195253,e=>{"use strict";function t(e){if(!e)throw Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${e}:connected_connector_id`}function a(){return"u">typeof window&&"u">typeof localStorage}e.s(["SafeLocalStorage",0,{setItem(e,t){a()&&void 0!==t&&localStorage.setItem(e,t)},getItem(e){if(a())return localStorage.getItem(e)||void 0},removeItem(e){a()&&localStorage.removeItem(e)},clear(){a()&&localStorage.clear()}},"SafeLocalStorageKeys",0,{WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",RECENT_WALLET:"@appkit/recent_wallet",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails",LATEST_APPKIT_VERSION:"@appkit/latest_version"},"getSafeConnectorIdKey",()=>t,"isSafe",()=>a])},313207,609191,796137,76914,997134,e=>{"use strict";var t=e.i(330699),a=e.i(944617),r=e.i(195253);let n={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5},isCacheExpired:(e,t)=>Date.now()-e>t,getActiveNetworkProps(){let e=n.getActiveNamespace(),t=n.getActiveCaipNetworkId(),a=t?t.split(":")[1]:void 0;return{namespace:e,caipNetworkId:t,chainId:a?isNaN(Number(a))?a:Number(a):void 0}},setWalletConnectDeepLink({name:e,href:t}){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID,e),n.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{let t=(0,r.getSafeConnectorIdKey)(e);r.SafeLocalStorage.removeItem(t)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{let t=n.getRecentWallets();t.find(t=>t.id===e.id)||(t.unshift(e),t.length>2&&t.pop(),r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.RECENT_WALLETS,JSON.stringify(t)),r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.RECENT_WALLET,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.RECENT_WALLET);return e?JSON.parse(e):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(e,t){try{let a=(0,r.getSafeConnectorIdKey)(e);r.SafeLocalStorage.setItem(a,t)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{let t=(0,r.getSafeConnectorIdKey)(e);return r.SafeLocalStorage.getItem(t)}catch(t){console.info("Unable to get connected connector id in namespace",e)}},setConnectedSocialProvider(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.ACTIVE_CAIP_NETWORK_ID);return e?.split(":")?.[1]},setConnectionStatus(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTED_NAMESPACES);if(!e?.length)return[];return e.split(",")}catch{return[]}},setConnectedNamespaces(e){try{let t=Array.from(new Set(e));r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTED_NAMESPACES,t.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{let t=n.getConnectedNamespaces();t.includes(e)||(t.push(e),n.setConnectedNamespaces(t))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{let t=n.getConnectedNamespaces(),a=t.indexOf(e);a>-1&&(t.splice(a,1),n.setConnectedNamespaces(t))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{let t=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{let t=n.getBalanceCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.PORTFOLIO_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{let t=n.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{let t=n.getBalanceCache();t[e.caipAddress]=e,r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.PORTFOLIO_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{let t=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{let t=n.getBalanceCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.NATIVE_BALANCE_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{let t=n.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),n.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{let t=n.getNativeBalanceCache();t[e.caipAddress]=e,r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{let t=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.ENS_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{let t=n.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;n.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{let t=n.getEnsCache();t[e.address]=e,r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.ENS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{let t=n.getEnsCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.ENS_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{let t=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{let t=n.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;n.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{let t=n.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.IDENTITY_CACHE,JSON.stringify(t))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{let t=n.getIdentityCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.IDENTITY_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove identity from cache",e)}},clearAddressCache(){try{r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.PORTFOLIO_CACHE),r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.NATIVE_BALANCE_CACHE),r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.ENS_CACHE),r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.IDENTITY_CACHE),r.SafeLocalStorage.removeItem(r.SafeLocalStorageKeys.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.PREFERRED_ACCOUNT_TYPES);if(!e)return{};return JSON.parse(e)}catch{console.info("Unable to get preferred account types")}return{}},setConnections(e,a){try{let o=n.getConnections(),s=o[a]??[],i=new Map;for(let e of s)i.set(e.connectorId,{...e});for(let a of e){let e=i.get(a.connectorId),r=a.connectorId===t.ConstantsUtil.CONNECTOR_ID.AUTH;if(e&&!r){let t=new Set(e.accounts.map(e=>e.address.toLowerCase())),r=a.accounts.filter(e=>!t.has(e.address.toLowerCase()));e.accounts.push(...r)}else i.set(a.connectorId,{...a})}let c={...o,[a]:Array.from(i.values())};r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTIONS,JSON.stringify(c))}catch(e){console.error("Unable to sync connections to storage",e)}},getConnections(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.CONNECTIONS);if(!e)return{};return JSON.parse(e)}catch(e){return console.error("Unable to get connections from storage",e),{}}},deleteAddressFromConnection({connectorId:e,address:t,namespace:a}){try{let o=n.getConnections(),s=o[a]??[],i=new Map(s.map(e=>[e.connectorId,e])),c=i.get(e);if(c){let a=c.accounts.filter(e=>e.address.toLowerCase()!==t.toLowerCase());0===a.length?i.delete(e):i.set(e,{...c,accounts:c.accounts.filter(e=>e.address.toLowerCase()!==t.toLowerCase())})}r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.CONNECTIONS,JSON.stringify({...o,[a]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${t}" from connector "${e}" in namespace "${a}"`)}},getDisconnectedConnectorIds(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.DISCONNECTED_CONNECTOR_IDS);if(!e)return{};return JSON.parse(e)}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(e,t){try{let a=n.getDisconnectedConnectorIds(),o=a[t]??[];o.push(e),r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...a,[t]:Array.from(new Set(o))}))}catch{console.error(`Unable to set disconnected connector id "${e}" for namespace "${t}"`)}},removeDisconnectedConnectorId(e,t){try{let a=n.getDisconnectedConnectorIds(),o=a[t]??[];o=o.filter(t=>t.toLowerCase()!==e.toLowerCase()),r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...a,[t]:Array.from(new Set(o))}))}catch{console.error(`Unable to remove disconnected connector id "${e}" for namespace "${t}"`)}},isConnectorDisconnected(e,t){try{return(n.getDisconnectedConnectorIds()[t]??[]).some(t=>t.toLowerCase()===e.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${e}" for namespace "${t}"`)}return!1},getTransactionsCache(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.HISTORY_TRANSACTIONS_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:e,chainId:t=""}){try{let a=n.getTransactionsCache(),r=a[e]?.[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.transactionsHistory))return r.transactions;n.removeTransactionsCache({address:e,chainId:t})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:e,chainId:t="",timestamp:a,transactions:o}){try{let s=n.getTransactionsCache();s[e]={...s[e],[t]:{timestamp:a,transactions:o}},r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:e,chainId:t,timestamp:a,transactions:o})}},removeTransactionsCache({address:e,chainId:t}){try{let a=n.getTransactionsCache(),{[t]:o,...s}=a?.[e]||{};r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...a,[e]:s}))}catch{console.info("Unable to remove transactions cache",{address:e,chainId:t})}},getTokenPriceCache(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.TOKEN_PRICE_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(e){try{let t=n.getTokenPriceCache()[e.join(",")];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.tokenPrice))return t.tokenPrice;n.removeTokenPriceCache(e)}catch{console.info("Unable to get token price cache for addresses",e)}},updateTokenPriceCache(e){try{let t=n.getTokenPriceCache();t[e.addresses.join(",")]={timestamp:e.timestamp,tokenPrice:e.tokenPrice},r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.TOKEN_PRICE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update token price cache",e)}},removeTokenPriceCache(e){try{let t=n.getTokenPriceCache();r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.TOKEN_PRICE_CACHE,JSON.stringify({...t,[e.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",e)}},getLatestAppKitVersion(){try{let e=this.getLatestAppKitVersionCache(),t=e?.version;if(t&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.latestAppKitVersion))return t}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{let e=r.SafeLocalStorage.getItem(r.SafeLocalStorageKeys.LATEST_APPKIT_VERSION);return e?JSON.parse(e):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(e){try{let t=n.getLatestAppKitVersionCache();t.timestamp=e.timestamp,t.version=e.version,r.SafeLocalStorage.setItem(r.SafeLocalStorageKeys.LATEST_APPKIT_VERSION,JSON.stringify(t))}catch{console.info("Unable to update latest AppKit version on local storage",e)}}};e.s(["StorageUtil",0,n],609191);let o={isMobile(){return!!this.isClient()&&!!(window?.matchMedia&&"function"==typeof window.matchMedia&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},checkCaipNetwork:(e,t="")=>e?.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase()),isAndroid(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return o.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){return!!this.isClient()&&(window?.navigator.userAgent.toLowerCase()).includes("safari")},isClient:()=>"u">typeof window,isPairingExpired:e=>!e||e-Date.now()<=a.ConstantsUtil.TEN_SEC_MS,isAllowedRetry:(e,t=a.ConstantsUtil.ONE_SEC_MS)=>Date.now()-e>=t,copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch(e){return!1}},isSafeApp(){if(o.isClient()&&window.self!==window.top)try{let e=window?.location?.ancestorOrigins?.[0];if(e){let t=new URL(e),a=new URL("https://app.safe.global");return t.hostname===a.hostname}}catch{}return!1},getPairingExpiry:()=>Date.now()+a.ConstantsUtil.FOUR_MINUTES_MS,getNetworkId:e=>e?.split(":")[1],getPlainAddress:e=>e?.split(":")[2],wait:async e=>new Promise(t=>{setTimeout(t,e)}),debounce(e,t=500){let a;return(...r)=>{a&&clearTimeout(a),a=setTimeout(function(){e(...r)},t)}},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),formatNativeUrl(e,t,a=null){if(o.isHttpUrl(e))return this.formatUniversalUrl(e,t);let r=e,n=a;r&&(r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`)),n&&!n?.endsWith("/")&&(n=`${n}/`),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t));let s=encodeURIComponent(t);return{redirect:`${r}wc?uri=${s}`,redirectUniversalLink:n?`${n}wc?uri=${s}`:void 0,href:r}},formatUniversalUrl(e,t){if(!o.isHttpUrl(e))return this.formatNativeUrl(e,t);let a=e;a.endsWith("/")||(a=`${a}/`);let r=encodeURIComponent(t);return{redirect:`${a}wc?uri=${r}`,href:a}},getOpenTargetForPlatform(e){return"popupWindow"===e?e:this.isTelegram()?n.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,t,a){window?.open(e,this.getOpenTargetForPlatform(t),a||"noreferrer noopener")},returnOpenHref(e,t,a){return window?.open(e,this.getOpenTargetForPlatform(t),a||"noreferrer noopener")},isTelegram:()=>"u">typeof window&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto),isPWA(){if("u"<typeof window)return!1;let e=!!window?.matchMedia&&"function"==typeof window.matchMedia&&window.matchMedia("(display-mode: standalone)")?.matches,t=window?.navigator?.standalone;return!!(e||t)},preloadImage:async e=>Promise.race([new Promise((t,a)=>{let r=new Image;r.onload=t,r.onerror=a,r.crossOrigin="anonymous",r.src=e}),o.wait(2e3)]),parseBalance(e,t){let a="0.000";if("string"==typeof e){let t=Number(e);if(!isNaN(t)){let e=(Math.floor(1e3*t)/1e3).toFixed(3);e&&(a=e)}}let[r,n]=a.split("."),o=r||"0",s=n||"000";return{formattedText:`${o}.${s}${t?` ${t}`:""}`,value:o,decimals:s,symbol:t}},getApiUrl:()=>t.ConstantsUtil.W3M_API_URL,getBlockchainApiUrl:()=>t.ConstantsUtil.BLOCKCHAIN_API_RPC_URL,getAnalyticsUrl:()=>t.ConstantsUtil.PULSE_API_URL,getUUID:()=>crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),parseError:e=>"string"==typeof e?e:"string"==typeof e?.issues?.[0]?.message?e.issues[0].message:e instanceof Error?e.message:"Unknown error",sortRequestedNetworks(e,t=[]){let a={};return t&&e&&(e.forEach((e,t)=>{a[e]=t}),t.sort((e,t)=>{let r=a[e.id],n=a[t.id];return void 0!==r&&void 0!==n?r-n:void 0!==r?-1:1*(void 0!==n)})),t},calculateBalance(e){let t=0;for(let a of e)t+=a.value??0;return t},formatTokenBalance(e){let[t,a]=e.toFixed(2).split(".");return{dollars:t,pennies:a}},isAddress(e,t="eip155"){switch(t){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)&&(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||/^(?:0x)?[0-9A-F]{40}$/iu.test(e)))return!0;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,t){let a=new Set;return e.filter(e=>{let r=e[t];return!a.has(r)&&(a.add(r),!0)})},generateSdkVersion(e,t,r){let n=0===e.length?a.ConstantsUtil.ADAPTER_TYPES.UNIVERSAL:e.map(e=>e.adapterType).join(",");return`${t}-${n}-${r}`},createAccount:(e,t,a,r,n)=>({namespace:e,address:t,type:a,publicKey:r,path:n}),isCaipAddress(e){if("string"!=typeof e)return!1;let a=e.split(":"),r=a[0];return 3===a.filter(Boolean).length&&r in t.ConstantsUtil.CHAIN_NAME_MAP},getAccount:e=>e?"string"==typeof e?{address:e,chainId:void 0}:{address:e.address,chainId:e.chainId}:{address:void 0,chainId:void 0},isMac(){let e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){let t=`--${encodeURIComponent(window?.location.href)}`,a="state=";if("auth.magic.link"===new URL(e).host){let r="provider_authorization_url=",n=e.substring(e.indexOf(r)+r.length),o=this.injectIntoUrl(decodeURIComponent(n),a,t);return e.replace(n,encodeURIComponent(o))}return this.injectIntoUrl(e,a,t)},injectIntoUrl(e,t,a){let r=e.indexOf(t);if(-1===r)throw Error(`${t} parameter not found in the URL: ${e}`);let n=e.indexOf("&",r),o=t.length,s=-1!==n?n:e.length;return e.substring(0,r+o)+(e.substring(r+o,s)+a)+e.substring(n)}};async function s(...e){let t=await fetch(...e);if(!t.ok)throw Error(`HTTP status code: ${t.status}`,{cause:t});return t}e.s(["CoreHelperUtil",0,o],313207);class i{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:a,...r}){let n=this.createUrl(r);return(await s(n,{method:"GET",headers:e,signal:t,cache:a})).json()}async getBlob({headers:e,signal:t,...a}){let r=this.createUrl(a);return(await s(r,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:a,...r}){let n=this.createUrl(r);return(await s(n,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:a})).json()}async put({body:e,headers:t,signal:a,...r}){let n=this.createUrl(r);return(await s(n,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:a})).json()}async delete({body:e,headers:t,signal:a,...r}){let n=this.createUrl(r);return(await s(n,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:a})).json()}createUrl({path:e,params:t}){let a=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach(([e,t])=>{t&&a.searchParams.append(e,t)}),this.clientId&&a.searchParams.append("clientId",this.clientId),a}sendBeacon({body:e,...t}){let a=this.createUrl(t);return navigator.sendBeacon(a.toString(),e?JSON.stringify(e):void 0)}}e.s(["FetchUtil",()=>i],796137),e.s(["OptionsController",()=>u],997134);var c=e.i(345740),l=e.i(121635);e.s(["OptionsUtil",()=>d],76914);let d={getFeatureValue(e,t){let r=t?.[e];return void 0===r?a.ConstantsUtil.DEFAULT_FEATURES[e]:r},filterSocialsByPlatform(e){if(!e||!e.length)return e;if(o.isTelegram()){if(o.isIos())return e.filter(e=>"google"!==e);if(o.isMac())return e.filter(e=>"x"!==e);if(o.isAndroid())return e.filter(e=>!["facebook","x"].includes(e))}return e},isSocialsEnabled:()=>Array.isArray(u.state.features?.socials)&&u.state.features?.socials.length>0||Array.isArray(u.state.remoteFeatures?.socials)&&u.state.remoteFeatures?.socials.length>0,isEmailEnabled:()=>!!(u.state.features?.email||u.state.remoteFeatures?.email)},p=(0,c.proxy)({features:a.ConstantsUtil.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:a.ConstantsUtil.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1}),u={state:p,subscribeKey:(e,t)=>(0,l.subscribeKey)(p,e,t),setOptions(e){Object.assign(p,e)},setRemoteFeatures(e){if(!e)return;let t={...p.remoteFeatures,...e};p.remoteFeatures=t,p.remoteFeatures?.socials&&(p.remoteFeatures.socials=d.filterSocialsByPlatform(p.remoteFeatures.socials)),p.features?.pay&&(p.remoteFeatures.email=!1,p.remoteFeatures.socials=!1)},setFeatures(e){if(!e)return;p.features||(p.features=a.ConstantsUtil.DEFAULT_FEATURES);let t={...p.features,...e};p.features=t,p.features?.pay&&p.remoteFeatures&&(p.remoteFeatures.email=!1,p.remoteFeatures.socials=!1)},setProjectId(e){p.projectId=e},setCustomRpcUrls(e){p.customRpcUrls=e},setAllWallets(e){p.allWallets=e},setIncludeWalletIds(e){p.includeWalletIds=e},setExcludeWalletIds(e){p.excludeWalletIds=e},setFeaturedWalletIds(e){p.featuredWalletIds=e},setTokens(e){p.tokens=e},setTermsConditionsUrl(e){p.termsConditionsUrl=e},setPrivacyPolicyUrl(e){p.privacyPolicyUrl=e},setCustomWallets(e){p.customWallets=e},setIsSiweEnabled(e){p.isSiweEnabled=e},setIsUniversalProvider(e){p.isUniversalProvider=e},setSdkVersion(e){p.sdkVersion=e},setMetadata(e){p.metadata=e},setDisableAppend(e){p.disableAppend=e},setEIP6963Enabled(e){p.enableEIP6963=e},setDebug(e){p.debug=e},setEnableWalletGuide(e){p.enableWalletGuide=e},setEnableAuthLogger(e){p.enableAuthLogger=e},setEnableWallets(e){p.enableWallets=e},setPreferUniversalLinks(e){p.experimental_preferUniversalLinks=e},setSIWX(e){if(e)for(let[t,r]of Object.entries(a.ConstantsUtil.SIWX_DEFAULTS))e[t]??=r;p.siwx=e},setConnectMethodsOrder(e){p.features={...p.features,connectMethodsOrder:e}},setWalletFeaturesOrder(e){p.features={...p.features,walletFeaturesOrder:e}},setSocialsOrder(e){p.remoteFeatures={...p.remoteFeatures,socials:e}},setCollapseWallets(e){p.features={...p.features,collapseWallets:e}},setEnableEmbedded(e){p.enableEmbedded=e},setAllowUnsupportedChain(e){p.allowUnsupportedChain=e},setManualWCControl(e){p.manualWCControl=e},setEnableNetworkSwitch(e){p.enableNetworkSwitch=e},setEnableMobileFullScreen(e){p.enableMobileFullScreen=o.isMobile()&&e},setEnableReconnect(e){p.enableReconnect=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach(([e,t])=>{t&&(p.defaultAccountTypes[e]=t)})},setUniversalProviderConfigOverride(e){p.universalProviderConfigOverride=e},getUniversalProviderConfigOverride:()=>p.universalProviderConfigOverride,getSnapshot:()=>(0,c.snapshot)(p)}},310428,988860,195741,261710,192165,e=>{"use strict";e.s(["BlockchainApiController",()=>g],310428);var t=e.i(345740),a=e.i(944617),r=e.i(313207),n=e.i(796137),o=e.i(609191),s=e.i(792411),i=e.i(997134),c=e.i(121635);let l=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),d=(0,t.proxy)({...l}),p={state:d,subscribeKey:(e,t)=>(0,c.subscribeKey)(d,e,t),showLoading(e,t={}){this._showMessage({message:e,variant:"loading",...t})},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,t){this._showMessage({message:e,svg:t})},showError(e){let t=r.CoreHelperUtil.parseError(e);this._showMessage({message:t,variant:"error"})},hide(){d.message=l.message,d.variant=l.variant,d.svg=l.svg,d.open=l.open,d.autoClose=l.autoClose},_showMessage({message:e,svg:t,variant:a="success",autoClose:r=l.autoClose}){d.open?(d.open=!1,setTimeout(()=>{d.message=e,d.variant=a,d.svg=t,d.open=!0,d.autoClose=r},150)):(d.message=e,d.variant=a,d.svg=t,d.open=!0,d.autoClose=r)}};e.s(["SnackController",0,p],988860);let u={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},C=r.CoreHelperUtil.getBlockchainApiUrl(),h=(0,t.proxy)({clientId:null,api:new n.FetchUtil({baseUrl:C,clientId:null}),supportedChains:{http:[],ws:[]}}),g={state:h,async get(e){let{st:t,sv:a}=g.getSdkProperties(),r=i.OptionsController.state.projectId,n={...e.params||{},st:t,sv:a,projectId:r};return h.api.get({...e,params:n})},getSdkProperties(){let{sdkType:e,sdkVersion:t}=i.OptionsController.state;return{st:e||"unknown",sv:t||"unknown"}},async isNetworkSupported(e){if(!e)return!1;try{h.supportedChains.http.length||await g.getSupportedNetworks()}catch(e){return!1}return h.supportedChains.http.includes(e)},async getSupportedNetworks(){try{let e=await g.get({path:"v1/supported-chains"});return h.supportedChains=e,e}catch{return h.supportedChains}},async fetchIdentity({address:e}){let t=o.StorageUtil.getIdentityFromCacheForAddress(e);if(t)return t;let a=await g.get({path:`/v1/identity/${e}`,params:{sender:s.ChainController.state.activeCaipAddress?r.CoreHelperUtil.getPlainAddress(s.ChainController.state.activeCaipAddress):void 0}});return o.StorageUtil.updateIdentityCache({address:e,identity:a,timestamp:Date.now()}),a},async fetchTransactions({account:e,cursor:t,signal:a,cache:r,chainId:n}){if(!await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return{data:[],next:void 0};let i=o.StorageUtil.getTransactionsCacheForAddress({address:e,chainId:n});if(i)return i;let c=await g.get({path:`/v1/account/${e}/history`,params:{cursor:t,chainId:n},signal:a,cache:r});return o.StorageUtil.updateTransactionsCache({address:e,chainId:n,timestamp:Date.now(),transactions:c}),c},fetchSwapQuote:async({amount:e,userAddress:t,from:a,to:r,gasPrice:n})=>await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:t,from:a,to:r,gasPrice:n}}):{quotes:[]},fetchSwapTokens:async({chainId:e})=>await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]},async fetchTokenPrice({addresses:e}){if(!await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return{fungibles:[]};let t=o.StorageUtil.getTokenPriceCacheForAddresses(e);if(t)return t;let a=await h.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:i.OptionsController.state.projectId},headers:{"Content-Type":"application/json"}});return o.StorageUtil.updateTokenPriceCache({addresses:e,timestamp:Date.now(),tokenPrice:a}),a},fetchSwapAllowance:async({tokenAddress:e,userAddress:t})=>await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:t},headers:{"Content-Type":"application/json"}}):{allowance:"0"},async fetchGasPrice({chainId:e}){let{st:t,sv:a}=g.getSdkProperties();if(!await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Gas Price");return g.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:a}})},async generateSwapCalldata({amount:e,from:t,to:r,userAddress:n,disableEstimate:o}){if(!await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Swaps");return h.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:a.ConstantsUtil.CONVERT_SLIPPAGE_TOLERANCE},projectId:i.OptionsController.state.projectId,from:t,to:r,userAddress:n,disableEstimate:o}})},async generateApproveCalldata({from:e,to:t,userAddress:a}){let{st:r,sv:n}=g.getSdkProperties();if(!await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))throw Error("Network not supported for Swaps");return g.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:a,from:e,to:t,st:r,sv:n}})},async getBalance(e,t,a){let{st:r,sv:n}=g.getSdkProperties();if(!await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return p.showError("Token Balance Unavailable"),{balances:[]};let i=`${t}:${e}`,c=o.StorageUtil.getBalanceCacheForCaipAddress(i);if(c)return c;let l=await g.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:t,forceUpdate:a,st:r,sv:n}});return o.StorageUtil.updateBalanceCache({caipAddress:i,balance:l,timestamp:Date.now()}),l},lookupEnsName:async e=>await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]},async reverseLookupEnsName({address:e}){if(!await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return[];let t=s.ChainController.getAccountData()?.address;return g.get({path:`/v1/profile/reverse/${e}`,params:{sender:t,apiVersion:"2"}})},getEnsNameSuggestions:async e=>await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]},registerEnsName:async({coinType:e,address:t,message:a,signature:r})=>await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?h.api.post({path:"/v1/profile/account",body:{coin_type:e,address:t,message:a,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1},generateOnRampURL:async({destinationWallets:e,partnerUserId:t,defaultNetwork:a,purchaseAmount:r,paymentAmount:n})=>await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?(await h.api.post({path:"/v1/generators/onrampurl",params:{projectId:i.OptionsController.state.projectId},body:{destinationWallets:e,defaultNetwork:a,partnerUserId:t,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:n}})).url:"",async getOnrampOptions(){if(!await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await g.get({path:"/v1/onramp/options"})}catch(e){return u}},async getOnrampQuote({purchaseCurrency:e,paymentCurrency:t,amount:a,network:r}){try{if(!await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId))return null;return await h.api.post({path:"/v1/onramp/quote",params:{projectId:i.OptionsController.state.projectId},body:{purchaseCurrency:e,paymentCurrency:t,amount:a,network:r}})}catch(e){return{networkFee:{amount:a,currency:t.id},paymentSubtotal:{amount:a,currency:t.id},paymentTotal:{amount:a,currency:t.id},purchaseAmount:{amount:a,currency:t.id},quoteId:"mocked-quote-id"}}},getSmartSessions:async e=>await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/sessions/${e}`}):[],revokeSmartSession:async(e,t,a)=>await g.isNetworkSupported(s.ChainController.state.activeCaipNetwork?.caipNetworkId)?h.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:i.OptionsController.state.projectId},body:{pci:t,signature:a}}):{success:!1},setClientId(e){h.clientId=e,h.api=new n.FetchUtil({baseUrl:C,clientId:e})}};function m(){let e=s.ChainController.state.activeCaipNetwork?.chainNamespace||"eip155",t=s.ChainController.state.activeCaipNetwork?.id||1,r=a.ConstantsUtil.NATIVE_TOKEN_ADDRESS[e];return`${e}:${t}:${r}`}function f(e){return s.ChainController.getAccountData(e)?.preferredAccountType}function w(e){return e?s.ChainController.state.chains.get(e)?.networkState?.caipNetwork:s.ChainController.state.activeCaipNetwork}function E(e,t){return"light"===t?{"--w3m-accent":e?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":e?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#202020"}}e.s(["getActiveCaipNetwork",()=>w,"getActiveNetworkTokenAddress",()=>m,"getPreferredAccountType",()=>f],195741),e.s(["getW3mThemeVariables",()=>E],261710);var S=e.i(76093);void 0!==S.default&&void 0!==S.default.env&&S.default.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL,void 0!==S.default&&void 0!==S.default.env&&S.default.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL,void 0!==S.default&&void 0!==S.default.env&&S.default.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION,e.s(["W3mFrameRpcConstants",0,{SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}}],192165)},470335,e=>{"use strict";e.s(["CUSTOM_DEEPLINK_WALLETS",()=>r,"MobileWalletUtil",()=>n]);var t=e.i(330699),a=e.i(792411);let r={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},n={handleMobileDeeplinkRedirect(e,n){let o=window.location.href,s=encodeURIComponent(o);if(e===r.PHANTOM.id&&!("phantom"in window)){let e=o.startsWith("https")?"https":"http",t=o.split("/")[2],a=encodeURIComponent(`${e}://${t}`);window.location.href=`${r.PHANTOM.url}/ul/browse/${s}?ref=${a}`}if(e!==r.SOLFLARE.id||"solflare"in window||(window.location.href=`${r.SOLFLARE.url}/ul/v1/browse/${s}?ref=${s}`),n!==t.ConstantsUtil.CHAIN.SOLANA||e!==r.COINBASE.id||"coinbaseSolana"in window||(window.location.href=`${r.COINBASE.url}/dapp?cb_url=${s}`),n===t.ConstantsUtil.CHAIN.BITCOIN&&e===r.BINANCE.id&&!("binancew3w"in window)){let e=a.ChainController.state.activeCaipNetwork,t=window.btoa("/pages/browser/index"),n=window.btoa(`url=${s}&defaultChainId=${e?.id??1}`),o=new URL(r.BINANCE.deeplink);o.searchParams.set("appId",r.BINANCE.appId),o.searchParams.set("startPagePath",t),o.searchParams.set("startPageQuery",n);let i=new URL(r.BINANCE.url);i.searchParams.set("_dp",window.btoa(o.toString())),window.location.href=i.toString()}}}},561998,132882,302678,e=>{"use strict";e.s(["AssetUtil",()=>w],561998);var t=e.i(345740),a=e.i(416661),r=e.i(121635),n=e.i(313207),o=e.i(796137),s=e.i(997134);let i=Object.freeze({enabled:!0,events:[]}),c=new o.FetchUtil({baseUrl:n.CoreHelperUtil.getAnalyticsUrl(),clientId:null}),l=(0,t.proxy)({...i}),d={state:l,subscribeKey:(e,t)=>(0,r.subscribeKey)(l,e,t),async sendError(e,t){if(!l.enabled)return;let a=Date.now();if(l.events.filter(e=>a-new Date(e.properties.timestamp||"").getTime()<6e4).length>=5)return;let r={type:"error",event:t,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:new Date().toISOString()}};l.events.push(r);try{if("u"<typeof window)return;let{projectId:a,sdkType:r,sdkVersion:o}=s.OptionsController.state;await c.post({path:"/e",params:{projectId:a,st:r,sv:o||"html-wagmi-4.2.2"},body:{eventId:n.CoreHelperUtil.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:t,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}})}catch{}},enable(){l.enabled=!0},disable(){l.enabled=!1},clearEvents(){l.events=[]}};class p extends Error{constructor(e,t,a){super(e),this.originalName="AppKitError",this.name="AppKitError",this.category=t,this.originalError=a,a&&a instanceof Error&&(this.originalName=a.name),Object.setPrototypeOf(this,p.prototype);let r=!1;if(a instanceof Error&&"string"==typeof a.stack&&a.stack){const e=a.stack,t=e.indexOf("\n");if(t>-1){const a=e.substring(t+1);this.stack=`${this.name}: ${this.message}
${a}`,r=!0}}!r&&(Error.captureStackTrace?Error.captureStackTrace(this,p):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function u(e,t){let a="";try{a=e instanceof Error?e.message:"string"==typeof e?e:"object"==typeof e&&null!==e?0===Object.keys(e).length?"Unknown error":e?.message||JSON.stringify(e):String(e)}catch(e){a="Unknown error",console.error("Error parsing error message",e)}let r=e instanceof p?e:new p(a,t,e);throw d.sendError(r,r.category),r}function C(e,t="INTERNAL_SDK_ERROR"){let a={};return Object.keys(e).forEach(r=>{let n=e[r];if("function"==typeof n){let e=n;e="AsyncFunction"===n.constructor.name?async(...e)=>{try{return await n(...e)}catch(e){return u(e,t)}}:(...e)=>{try{return n(...e)}catch(e){return u(e,t)}},a[r]=e}else a[r]=n}),a}e.s(["AppKitError",()=>p,"withErrorBoundary",()=>C],132882);let h=(0,t.proxy)({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),g=C({state:h,subscribeNetworkImages:e=>(0,t.subscribe)(h.networkImages,()=>e(h.networkImages)),subscribeKey:(e,t)=>(0,r.subscribeKey)(h,e,t),subscribe:e=>(0,t.subscribe)(h,()=>e(h)),setWalletImage(e,t){h.walletImages[e]=t},setNetworkImage(e,t){h.networkImages[e]=t},setChainImage(e,t){h.chainImages[e]=t},setConnectorImage(e,t){h.connectorImages={...h.connectorImages,[e]:t}},setTokenImage(e,t){h.tokenImages[e]=t},setCurrencyImage(e,t){h.currencyImages[e]=t}});e.s(["AssetController",0,g],302678);let m={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},f=(0,t.proxy)({networkImagePromises:{}}),w={async fetchWalletImage(e){if(e)return await a.ApiController._fetchWalletImage(e),this.getWalletImageById(e)},async fetchNetworkImage(e){if(!e)return;let t=this.getNetworkImageById(e);return t||(f.networkImagePromises[e]||(f.networkImagePromises[e]=a.ApiController._fetchNetworkImage(e)),await f.networkImagePromises[e],this.getNetworkImageById(e))},getWalletImageById(e){if(e)return g.state.walletImages[e]},getWalletImage:e=>e?.image_url?e?.image_url:e?.image_id?g.state.walletImages[e.image_id]:void 0,getNetworkImage:e=>e?.assets?.imageUrl?e?.assets?.imageUrl:e?.assets?.imageId?g.state.networkImages[e.assets.imageId]:void 0,getNetworkImageById(e){if(e)return g.state.networkImages[e]},getConnectorImage:e=>e?.imageUrl?e.imageUrl:e?.info?.icon?e.info.icon:e?.imageId?g.state.connectorImages[e.imageId]:void 0,getChainImage:e=>g.state.networkImages[m[e]],getTokenImage(e){if(e)return g.state.tokenImages[e]}}},467473,e=>{"use strict";e.s(["EventsController",()=>d]);var t=e.i(345740),a=e.i(313207),r=e.i(796137),n=e.i(792411),o=e.i(997134);let s=a.CoreHelperUtil.getAnalyticsUrl(),i=new r.FetchUtil({baseUrl:s,clientId:null}),c=["MODAL_CREATED"],l=(0,t.proxy)({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),d={state:l,subscribe:e=>(0,t.subscribe)(l,()=>e(l)),getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:a}=o.OptionsController.state;return{projectId:e,st:t,sv:a||"html-wagmi-4.2.2"}},shouldFlushEvents(){let e=JSON.stringify(l.pendingEvents).length/1024>45,t=l.lastFlush+1e4<Date.now();return e||t},_setPendingEvent(e){try{let t=n.ChainController.getAccountData()?.address;if("address"in e.data&&e.data.address&&(t=e.data.address),c.includes(e.data.event)||"u"<typeof window)return;let r=n.ChainController.getActiveCaipNetwork()?.caipNetworkId;this.state.pendingEvents.push({eventId:a.CoreHelperUtil.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:{...e.data,address:t,properties:{..."properties"in e.data?e.data.properties:{},caipNetworkId:r}}}),l.reportedErrors.FORBIDDEN=!1,d.shouldFlushEvents()&&d._submitPendingEvents()}catch(e){console.warn("_setPendingEvent",e)}},sendEvent(e){l.timestamp=Date.now(),l.data=e,(o.OptionsController.state.features?.analytics||["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"].includes(e.event))&&d._setPendingEvent(l),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(e){l.walletImpressions.push(e)},_transformPendingEventsForBatch(e){try{return e.filter(e=>{let t=e.props.event;return"WALLET_IMPRESSION"!==t})}catch{return e}},_submitPendingEvents(){if(l.lastFlush=Date.now(),0!==l.pendingEvents.length||0!==l.walletImpressions.length)try{let e=d._transformPendingEventsForBatch(l.pendingEvents);l.walletImpressions.length&&e.push({eventId:a.CoreHelperUtil.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION",items:[...l.walletImpressions]}}),i.sendBeacon({path:"/batch",params:d.getSdkProperties(),body:e}),l.reportedErrors.FORBIDDEN=!1,l.pendingEvents=[],l.walletImpressions=[]}catch(e){l.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){l.subscribedToVisibilityChange||"u">typeof document&&(l.subscribedToVisibilityChange=!0,document?.addEventListener?.("visibilitychange",()=>{"hidden"===document.visibilityState&&d._submitPendingEvents()}),document?.addEventListener?.("freeze",()=>{d._submitPendingEvents()}),window?.addEventListener?.("pagehide",()=>{d._submitPendingEvents()}),setInterval(()=>{d._submitPendingEvents()},1e4))}}},416661,e=>{"use strict";e.s(["ApiController",()=>f]);var t=e.i(345740),a=e.i(121635),r=e.i(330699),n=e.i(561998),o=e.i(313207),s=e.i(796137),i=e.i(470335),c=e.i(609191),l=e.i(302678),d=e.i(792411),p=e.i(612753),u=e.i(467473),C=e.i(997134);let h=o.CoreHelperUtil.getApiUrl(),g=new s.FetchUtil({baseUrl:h,clientId:null}),m=(0,t.proxy)({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[]}),f={state:m,subscribeKey:(e,t)=>(0,a.subscribeKey)(m,e,t),_getSdkProperties(){let{projectId:e,sdkType:t,sdkVersion:a}=C.OptionsController.state;return{projectId:e,st:t||"appkit",sv:a||"html-wagmi-4.2.2"}},_filterOutExtensions:e=>C.OptionsController.state.isUniversalProvider?e.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):e,async _fetchWalletImage(e){let t=`${g.baseUrl}/getWalletImage/${e}`,a=await g.getBlob({path:t,params:f._getSdkProperties()});l.AssetController.setWalletImage(e,URL.createObjectURL(a))},async _fetchNetworkImage(e){let t=`${g.baseUrl}/public/getAssetImage/${e}`,a=await g.getBlob({path:t,params:f._getSdkProperties()});l.AssetController.setNetworkImage(e,URL.createObjectURL(a))},async _fetchConnectorImage(e){let t=`${g.baseUrl}/public/getAssetImage/${e}`,a=await g.getBlob({path:t,params:f._getSdkProperties()});l.AssetController.setConnectorImage(e,URL.createObjectURL(a))},async _fetchCurrencyImage(e){let t=`${g.baseUrl}/public/getCurrencyImage/${e}`,a=await g.getBlob({path:t,params:f._getSdkProperties()});l.AssetController.setCurrencyImage(e,URL.createObjectURL(a))},async _fetchTokenImage(e){let t=`${g.baseUrl}/public/getTokenImage/${e}`,a=await g.getBlob({path:t,params:f._getSdkProperties()});l.AssetController.setTokenImage(e,URL.createObjectURL(a))},_filterWalletsByPlatform(e){let t=e.length,a=o.CoreHelperUtil.isMobile()?e?.filter(e=>!!e.mobile_link||!!e.webapp_link||Object.values(i.CUSTOM_DEEPLINK_WALLETS).map(e=>e.id).includes(e.id)):e,r=t-a.length;return{filteredWallets:a,mobileFilteredOutWalletsLength:r}},fetchProjectConfig:async()=>(await g.get({path:"/appkit/v1/config",params:f._getSdkProperties()})).features,async fetchAllowedOrigins(){try{let{allowedOrigins:e}=await g.get({path:"/projects/v1/origins",params:f._getSdkProperties()});return e}catch(e){if(e instanceof Error&&e.cause instanceof Response){let t=e.cause.status;if(t===r.ConstantsUtil.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw Error("RATE_LIMITED",{cause:e});if(t>=r.ConstantsUtil.HTTP_STATUS_CODES.SERVER_ERROR&&t<600)throw Error("SERVER_ERROR",{cause:e})}return[]}},async fetchNetworkImages(){let e=d.ChainController.getAllRequestedCaipNetworks(),t=e?.map(({assets:e})=>e?.imageId).filter(Boolean).filter(e=>!n.AssetUtil.getNetworkImageById(e));t&&await Promise.allSettled(t.map(e=>f._fetchNetworkImage(e)))},async fetchConnectorImages(){let{connectors:e}=p.ConnectorController.state,t=e.map(({imageId:e})=>e).filter(Boolean);await Promise.allSettled(t.map(e=>f._fetchConnectorImage(e)))},async fetchCurrencyImages(e=[]){await Promise.allSettled(e.map(e=>f._fetchCurrencyImage(e)))},async fetchTokenImages(e=[]){await Promise.allSettled(e.map(e=>f._fetchTokenImage(e)))},async fetchWallets(e){let t=e.exclude??[];f._getSdkProperties().sv.startsWith("html-core-")&&t.push(...Object.values(i.CUSTOM_DEEPLINK_WALLETS).map(e=>e.id));let a=await g.get({path:"/getWallets",params:{...f._getSdkProperties(),...e,page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:t.join(",")}}),{filteredWallets:r,mobileFilteredOutWalletsLength:n}=f._filterWalletsByPlatform(a?.data);return{data:r||[],count:a?.count,mobileFilteredOutWalletsLength:n}},async prefetchWalletRanks(){let e=p.ConnectorController.state.connectors;if(!e?.length)return;let t={page:1,entries:20,badge:"certified"};if(t.names=e.map(e=>e.name).join(","),d.ChainController.state.activeChain===r.ConstantsUtil.CHAIN.EVM){let a=[...e.flatMap(e=>e.connectors?.map(e=>e.info?.rdns)||[]),...e.map(e=>e.info?.rdns)].filter(e=>"string"==typeof e&&e.length>0);a.length&&(t.rdns=a.join(","))}let{data:a}=await f.fetchWallets(t);m.explorerWallets=a;let n=d.ChainController.getRequestedCaipNetworkIds().join(",");m.explorerFilteredWallets=a.filter(e=>e.chains?.some(e=>n.includes(e)))},async fetchFeaturedWallets(){let{featuredWalletIds:e}=C.OptionsController.state;if(e?.length){let t={...f._getSdkProperties(),page:1,entries:e?.length??4,include:e},{data:a}=await f.fetchWallets(t),r=[...a].sort((t,a)=>e.indexOf(t.id)-e.indexOf(a.id)),n=r.map(e=>e.image_id).filter(Boolean);await Promise.allSettled(n.map(e=>f._fetchWalletImage(e))),m.featured=r,m.allFeatured=r}},async fetchRecommendedWallets(){try{m.isFetchingRecommendedWallets=!0;let{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:a}=C.OptionsController.state,r=[...t??[],...a??[]].filter(Boolean),n=d.ChainController.getRequestedCaipNetworkIds().join(","),{data:o,count:s}=await f.fetchWallets({page:1,entries:4,include:e,exclude:r,chains:n}),i=c.StorageUtil.getRecentWallets(),l=o.map(e=>e.image_id).filter(Boolean),p=i.map(e=>e.image_id).filter(Boolean);await Promise.allSettled([...l,...p].map(e=>f._fetchWalletImage(e))),m.recommended=o,m.allRecommended=o,m.count=s??0}catch{}finally{m.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:e}){let{includeWalletIds:t,excludeWalletIds:a,featuredWalletIds:r}=C.OptionsController.state,n=d.ChainController.getRequestedCaipNetworkIds().join(","),s=[...m.recommended.map(({id:e})=>e),...a??[],...r??[]].filter(Boolean),{data:i,count:c,mobileFilteredOutWalletsLength:l}=await f.fetchWallets({page:e,entries:40,include:t,exclude:s,chains:n});m.mobileFilteredOutWalletsLength=l+(m.mobileFilteredOutWalletsLength??0);let p=i.slice(0,20).map(e=>e.image_id).filter(Boolean);await Promise.allSettled(p.map(e=>f._fetchWalletImage(e))),m.wallets=o.CoreHelperUtil.uniqueBy([...m.wallets,...f._filterOutExtensions(i)],"id").filter(e=>e.chains?.some(e=>n.includes(e))),m.count=c>m.count?c:m.count,m.page=e},async initializeExcludedWallets({ids:e}){let t={page:1,entries:e.length,include:e},{data:a}=await f.fetchWallets(t);a&&a.forEach(e=>{m.excludedWallets.push({rdns:e.rdns,name:e.name})})},async searchWallet({search:e,badge:t}){let{includeWalletIds:a,excludeWalletIds:r}=C.OptionsController.state,n=d.ChainController.getRequestedCaipNetworkIds().join(",");m.search=[];let s={page:1,entries:100,search:e?.trim(),badge_type:t,include:a,exclude:r,chains:n},{data:i}=await f.fetchWallets(s);u.EventsController.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:t??"",search:e??""}});let c=i.map(e=>e.image_id).filter(Boolean);await Promise.allSettled([...c.map(e=>f._fetchWalletImage(e)),o.CoreHelperUtil.wait(300)]),m.search=f._filterOutExtensions(i)},initPromise(e,t){let a=m.promises[e];return a||(m.promises[e]=t())},prefetch:({fetchConnectorImages:e=!0,fetchFeaturedWallets:t=!0,fetchRecommendedWallets:a=!0,fetchNetworkImages:r=!0,fetchWalletRanks:n=!0}={})=>Promise.allSettled([e&&f.initPromise("connectorImages",f.fetchConnectorImages),t&&f.initPromise("featuredWallets",f.fetchFeaturedWallets),a&&f.initPromise("recommendedWallets",f.fetchRecommendedWallets),r&&f.initPromise("networkImages",f.fetchNetworkImages),n&&f.initPromise("walletRanks",f.prefetchWalletRanks)].filter(Boolean)),prefetchAnalyticsConfig(){C.OptionsController.state.features?.analytics&&f.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{let{isAnalyticsEnabled:e}=await g.get({path:"/getAnalyticsConfig",params:f._getSdkProperties()});C.OptionsController.setFeatures({analytics:e})}catch(e){C.OptionsController.setFeatures({analytics:!1})}},filterByNamespaces(e){if(!e?.length){m.featured=m.allFeatured,m.recommended=m.allRecommended;return}let t=d.ChainController.getRequestedCaipNetworkIds().join(",");m.featured=m.allFeatured.filter(e=>e.chains?.some(e=>t.includes(e))),m.recommended=m.allRecommended.filter(e=>e.chains?.some(e=>t.includes(e))),m.filteredWallets=m.wallets.filter(e=>e.chains?.some(e=>t.includes(e)))},clearFilterByNamespaces(){m.filteredWallets=[]},setFilterByNamespace(e){if(!e){m.featured=m.allFeatured,m.recommended=m.allRecommended;return}let t=d.ChainController.getRequestedCaipNetworkIds().join(",");m.featured=m.allFeatured.filter(e=>e.chains?.some(e=>t.includes(e))),m.recommended=m.allRecommended.filter(e=>e.chains?.some(e=>t.includes(e))),m.filteredWallets=m.wallets.filter(e=>e.chains?.some(e=>t.includes(e)))}}},143781,e=>{"use strict";e.s(["NetworkUtil",()=>o]);var t=e.i(330699),a=e.i(792411),r=e.i(612753),n=e.i(643009);let o={onSwitchNetwork({network:e,ignoreSwitchConfirmation:o=!1}){let s=a.ChainController.state.activeCaipNetwork,i=a.ChainController.state.activeChain,c=n.RouterController.state.data;if(e.id===s?.id)return;let l=!!a.ChainController.getAccountData(i)?.address,d=!!a.ChainController.getAccountData(e.chainNamespace)?.address,p=e.chainNamespace!==i,u=r.ConnectorController.getConnectorId(i)===t.ConstantsUtil.CONNECTOR_ID.AUTH,C=t.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(t=>t===e.chainNamespace);o||u&&C?n.RouterController.push("SwitchNetwork",{...c,network:e}):l&&p&&!d?n.RouterController.push("SwitchActiveChain",{switchToChain:e.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:e}):n.RouterController.push("SwitchNetwork",{...c,network:e})}}},792411,330041,308769,643009,765595,612753,885390,553956,371101,720004,657256,728182,213522,e=>{"use strict";let t,a;e.s(["ChainController",()=>ef],792411);var r=e.i(345740),n=e.i(121635),o=e.i(330699),s=e.i(932362),i=e.i(535225);e.s(["BalanceUtil",()=>q],371101);var c=e.i(14304),l=e.i(823726),d=e.i(310428);e.s(["ConnectionController",()=>K],553956);var p=e.i(195741);e.s(["ConnectionControllerUtil",()=>D],885390),e.s(["ConnectorController",()=>L],612753);var u=e.i(261710),C=e.i(192165),h=e.i(470335),g=e.i(609191),m=e.i(132882),f=e.i(416661),w=e.i(997134);e.s(["RouterController",()=>T],643009),e.s(["ModalController",()=>v],308769);var E=e.i(313207),S=e.i(143781),A=e.i(467473);let N=(0,r.proxy)({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),y={state:N,subscribe:e=>(0,r.subscribe)(N,()=>e(N)),subscribeOpen:e=>(0,n.subscribeKey)(N,"open",e),set(e){Object.assign(N,{...N,...e})}};e.s(["PublicStateController",0,y],330041);let I=(0,r.proxy)({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),v=(0,m.withErrorBoundary)({state:I,subscribe:e=>(0,r.subscribe)(I,()=>e(I)),subscribeKey:(e,t)=>(0,n.subscribeKey)(I,e,t),async open(e){let t=e?.namespace,a=ef.state.activeChain,r=t&&t!==a,n=ef.getAccountData(e?.namespace)?.caipAddress,o=ef.state.noAdapters;if(K.state.wcBasic?f.ApiController.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):await f.ApiController.prefetch(),L.setFilterByNamespace(e?.namespace),v.setLoading(!0,t),t&&r){let e=ef.getNetworkData(t)?.caipNetwork||ef.getRequestedCaipNetworks(t)[0];e&&(o?(await ef.switchActiveNetwork(e),T.push("ConnectingWalletConnectBasic")):S.NetworkUtil.onSwitchNetwork({network:e,ignoreSwitchConfirmation:!0}))}else w.OptionsController.state.manualWCControl||o&&!n?E.CoreHelperUtil.isMobile()?T.reset("AllWallets"):T.reset("ConnectingWalletConnectBasic"):e?.view?T.reset(e.view,e.data):n?T.reset("Account"):T.reset("Connect");I.open=!0,y.set({open:!0}),A.EventsController.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!n}})},close(){let e=w.OptionsController.state.enableEmbedded,t=!!ef.state.activeCaipAddress;I.open&&A.EventsController.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),I.open=!1,T.reset("Connect"),v.clearLoading(),e?t?T.replace("Account"):T.push("Connect"):y.set({open:!1}),K.resetUri()},setLoading(e,t){t&&I.loadingNamespaceMap.set(t,e),I.loading=e,y.set({loading:e})},clearLoading(){I.loadingNamespaceMap.clear(),I.loading=!1,y.set({loading:!1})},shake(){I.shake||(I.shake=!0,setTimeout(()=>{I.shake=!1},500))}}),k=(0,r.proxy)({view:"Connect",history:["Connect"],transactionStack:[]}),T=(0,m.withErrorBoundary)({state:k,subscribeKey:(e,t)=>(0,n.subscribeKey)(k,e,t),pushTransactionStack(e){k.transactionStack.push(e)},popTransactionStack(e){let t=k.transactionStack.pop();if(!t)return;let{onSuccess:a,onError:r,onCancel:n}=t;switch(e){case"success":a?.();break;case"error":r?.(),T.goBack();break;case"cancel":n?.(),T.goBack()}},push(e,t){e!==k.view&&(k.view=e,k.history.push(e),k.data=t)},reset(e,t){k.view=e,k.history=[e],k.data=t},replace(e,t){k.history.at(-1)!==e&&(k.view=e,k.history[k.history.length-1]=e,k.data=t)},goBack(){let e=ef.state.activeCaipAddress,t="ConnectingFarcaster"===T.state.view,a=!e&&t;if(k.history.length>1){k.history.pop();let[t]=k.history.slice(-1);t&&(e&&"Connect"===t?k.view="Account":k.view=t)}else v.close();k.data?.wallet&&(k.data.wallet=void 0),k.data?.redirectView&&(k.data.redirectView=void 0),setTimeout(()=>{if(a){ef.setAccountProp("farcasterUrl",void 0,ef.state.activeChain);let e=L.getAuthConnector();e?.provider?.reload();let t=(0,r.snapshot)(w.OptionsController.state);e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType})}},100)},goBackToIndex(e){if(k.history.length>1){k.history=k.history.slice(0,e+1);let[t]=k.history.slice(-1);t&&(k.view=t)}},goBackOrCloseModal(){T.state.history.length>1?T.goBack():v.close()}});e.s(["ThemeController",()=>U],765595);let _=(0,r.proxy)({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),b={state:_,subscribe:e=>(0,r.subscribe)(_,()=>e(_)),setThemeMode(e){_.themeMode=e;try{let t=L.getAuthConnector();if(t){let a=b.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:a,w3mThemeVariables:(0,u.getW3mThemeVariables)(a,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){_.themeVariables={..._.themeVariables,...e};try{let e=L.getAuthConnector();if(e){let t=b.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:(0,u.getW3mThemeVariables)(_.themeVariables,_.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot:()=>(0,r.snapshot)(_)},U=(0,m.withErrorBoundary)(b),O=Object.fromEntries(s.AVAILABLE_NAMESPACES.map(e=>[e,void 0])),R=Object.fromEntries(s.AVAILABLE_NAMESPACES.map(e=>[e,!0])),P=(0,r.proxy)({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:O,filterByNamespaceMap:R}),L=(0,m.withErrorBoundary)({state:P,subscribe:e=>(0,r.subscribe)(P,()=>{e(P)}),subscribeKey:(e,t)=>(0,n.subscribeKey)(P,e,t),initialize(e){e.forEach(e=>{let t=g.StorageUtil.getConnectedConnectorId(e);t&&L.setConnectorId(t,e)})},setActiveConnector(e){e&&(P.activeConnector=(0,r.ref)(e))},setConnectors(e){e.filter(e=>!P.allConnectors.some(t=>t.id===e.id&&L.getConnectorName(t.name)===L.getConnectorName(e.name)&&t.chain===e.chain)).forEach(e=>{"MULTI_CHAIN"!==e.type&&P.allConnectors.push((0,r.ref)(e))});let t=L.getEnabledNamespaces(),a=L.getEnabledConnectors(t);P.connectors=L.mergeMultiChainConnectors(a)},filterByNamespaces(e){Object.keys(P.filterByNamespaceMap).forEach(e=>{P.filterByNamespaceMap[e]=!1}),e.forEach(e=>{P.filterByNamespaceMap[e]=!0}),L.updateConnectorsForEnabledNamespaces()},filterByNamespace(e,t){P.filterByNamespaceMap[e]=t,L.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){let e=L.getEnabledNamespaces(),t=L.getEnabledConnectors(e),a=L.areAllNamespacesEnabled();P.connectors=L.mergeMultiChainConnectors(t),a?f.ApiController.clearFilterByNamespaces():f.ApiController.filterByNamespaces(e)},getEnabledNamespaces:()=>Object.entries(P.filterByNamespaceMap).filter(([e,t])=>t).map(([e])=>e),getEnabledConnectors:e=>P.allConnectors.filter(t=>e.includes(t.chain)),areAllNamespacesEnabled:()=>Object.values(P.filterByNamespaceMap).every(e=>e),mergeMultiChainConnectors(e){let t=L.generateConnectorMapByName(e),a=[];return t.forEach(e=>{let t=e[0],r=t?.id===o.ConstantsUtil.CONNECTOR_ID.AUTH;e.length>1&&t?a.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:[...e],type:r?"AUTH":"MULTI_CHAIN",chain:"eip155",id:t?.id||""}):t&&a.push(t)}),a},generateConnectorMapByName(e){let t=new Map;return e.forEach(e=>{let{name:a}=e,r=L.getConnectorName(a);if(!r)return;let n=t.get(r)||[];n.find(t=>t.chain===e.chain)||n.push(e),t.set(r,n)}),t},getConnectorName:e=>e&&({"Trust Wallet":"Trust"})[e]||e,getUniqueConnectorsByName(e){let t=[];return e.forEach(e=>{t.find(t=>t.chain===e.chain)||t.push(e)}),t},addConnector(e){if(e.id===o.ConstantsUtil.CONNECTOR_ID.AUTH){let t=(0,r.snapshot)(w.OptionsController.state),a=U.getSnapshot().themeMode,n=U.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType}),e?.provider?.syncTheme({themeMode:a,themeVariables:n,w3mThemeVariables:(0,u.getW3mThemeVariables)(n,a)}),L.setConnectors([e])}else L.setConnectors([e])},getAuthConnector(e){let t=e||ef.state.activeChain,a=P.connectors.find(e=>e.id===o.ConstantsUtil.CONNECTOR_ID.AUTH);if(a)return a?.connectors?.length?a.connectors.find(e=>e.chain===t):a},getAnnouncedConnectorRdns:()=>P.connectors.filter(e=>"ANNOUNCED"===e.type).map(e=>e.info?.rdns),getConnectorById:e=>P.allConnectors.find(t=>t.id===e),getConnector({id:e,rdns:t,namespace:a}){let r=a||ef.state.activeChain;return P.allConnectors.filter(e=>e.chain===r).find(a=>a.explorerId===e||a.info?.rdns===t)},syncIfAuthConnector(e){if("ID_AUTH"!==e.id)return;let t=(0,r.snapshot)(w.OptionsController.state),a=U.getSnapshot().themeMode,n=U.getSnapshot().themeVariables;e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),e.provider.syncTheme({themeMode:a,themeVariables:n,w3mThemeVariables:(0,u.getW3mThemeVariables)(n,a)})},getConnectorsByNamespace(e){let t=P.allConnectors.filter(t=>t.chain===e);return L.mergeMultiChainConnectors(t)},canSwitchToSmartAccount:e=>ef.checkIfSmartAccountEnabled()&&(0,p.getPreferredAccountType)(e)===C.W3mFrameRpcConstants.ACCOUNT_TYPES.EOA,selectWalletConnector(e){let t=T.state.data?.redirectView,a=L.getConnector({id:e.id,rdns:e.rdns});h.MobileWalletUtil.handleMobileDeeplinkRedirect(a?.explorerId||e.id,ef.state.activeChain),a?T.push("ConnectingExternal",{connector:a,wallet:e,redirectView:t}):T.push("ConnectingWalletConnect",{wallet:e,redirectView:t})},getConnectors:e=>e?L.getConnectorsByNamespace(e):L.mergeMultiChainConnectors(P.allConnectors),setFilterByNamespace(e){P.filterByNamespace=e,P.connectors=L.getConnectors(e),f.ApiController.setFilterByNamespace(e)},setConnectorId(e,t){e&&(P.activeConnectorIds={...P.activeConnectorIds,[t]:e},g.StorageUtil.setConnectedConnectorId(t,e))},removeConnectorId(e){P.activeConnectorIds={...P.activeConnectorIds,[e]:void 0},g.StorageUtil.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return P.activeConnectorIds[e]},isConnected:e=>e?!!P.activeConnectorIds[e]:Object.values(P.activeConnectorIds).some(e=>!!e),resetConnectorIds(){P.activeConnectorIds={...O}}}),D={getConnectionStatus(e,t){let a=L.state.activeConnectorIds[t],r=K.getConnections(t);return a&&e.connectorId===a?"connected":r.some(t=>t.connectorId.toLowerCase()===e.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections:({connections:e,connectorId:t,addresses:a})=>e.map(e=>{if(t&&e.connectorId.toLowerCase()===t.toLowerCase()&&a){let t=e.accounts.filter(e=>!a.some(t=>t.toLowerCase()===e.address.toLowerCase()));return{...e,accounts:t}}return e}),excludeExistingConnections(e,t){let a=new Set(e);return t.filter(e=>!a.has(e.connectorId))},getConnectionsByConnectorId:(e,t)=>e.filter(e=>e.connectorId.toLowerCase()===t.toLowerCase()),getConnectionsData(e){let t=!!w.OptionsController.state.remoteFeatures?.multiWallet,a=L.state.activeConnectorIds[e],r=K.getConnections(e),n=(K.state.recentConnections.get(e)??[]).filter(e=>L.getConnectorById(e.connectorId)),o=D.excludeExistingConnections([...r.map(e=>e.connectorId),...a?[a]:[]],n);return t?{connections:r,recentConnections:o}:{connections:r.filter(e=>e.connectorId.toLowerCase()===a?.toLowerCase()),recentConnections:[]}}};var B=e.i(944617);let M={checkNamespaceConnectorId:(e,t)=>L.getConnectorId(e)===t,isSocialProvider:e=>B.ConstantsUtil.DEFAULT_REMOTE_FEATURES.socials.includes(e),connectWalletConnect:({walletConnect:e,connector:t,closeModalOnConnect:a=!0,redirectViewOnModalClose:r="Connect",onOpen:n,onConnect:o})=>new Promise((s,c)=>{if(e&&L.setActiveConnector(t),n?.(E.CoreHelperUtil.isMobile()&&e),r){let e=v.subscribeKey("open",t=>{t||(T.state.view!==r&&T.replace(r),e(),c(Error("Modal closed")))})}let l=ef.subscribeKey("activeCaipAddress",e=>{e&&(o?.(),a&&v.close(),l(),s(i.ParseUtil.parseCaipAddress(e)))})}),connectExternal:e=>new Promise((t,a)=>{let r=ef.subscribeKey("activeCaipAddress",e=>{e&&(v.close(),r(),t(i.ParseUtil.parseCaipAddress(e)))});K.connectExternal(e,e.chain).catch(()=>{r(),a(Error("Connection rejected"))})}),connectSocial({social:e,namespace:t,closeModalOnConnect:a=!0,onOpenFarcaster:n,onConnect:s}){let c=ef.getAccountData(t),l=c?.socialWindow,d=c?.socialProvider,p=!1,u=null,C=t||ef.state.activeChain,h=ef.subscribeKey("activeCaipAddress",e=>{e&&(a&&v.close(),h())});return new Promise((t,a)=>{async function h(e){if(e.data?.resultUri)if(e.origin===o.ConstantsUtil.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",h,!1);try{let r=L.getAuthConnector(C);if(r&&!p){let n=ef.getAccountData(C);l&&(l.close(),ef.setAccountProp("socialWindow",void 0,C),l=n?.socialWindow),p=!0;let o=e.data.resultUri;if(d&&A.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:d}}),d){g.StorageUtil.setConnectedSocialProvider(d),await K.connectExternal({id:r.id,type:r.type,socialUri:o},r.chain);let e=ef.state.activeCaipAddress;if(!e)return void a(Error("Failed to connect"));t(i.ParseUtil.parseCaipAddress(e)),A.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:d}})}}}catch(e){d&&A.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:d,message:E.CoreHelperUtil.parseError(e)}}),a(Error("Failed to connect"))}}else d&&A.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:d,message:"Untrusted Origin"}})}!async function(){if(e){let t=ef.getAccountData(C);ef.setAccountProp("socialProvider",e,C),d=t?.socialProvider,A.EventsController.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:d}})}if("farcaster"===d){n?.();let t=v.subscribeKey("open",r=>{r||"farcaster"!==e||(a(Error("Popup closed")),s?.(),t())}),r=L.getAuthConnector();if(r){let e=ef.getAccountData(C);if(!e?.farcasterUrl)try{let{url:e}=await r.provider.getFarcasterUri();ef.setAccountProp("farcasterUrl",e,C)}catch{a(Error("Failed to connect to farcaster"))}}}else{let e=L.getAuthConnector();u=E.CoreHelperUtil.returnOpenHref(`${o.ConstantsUtil.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(e&&d){let{uri:t}=await e.provider.getSocialRedirectUri({provider:d});if(u&&t){ef.setAccountProp("socialWindow",(0,r.ref)(u),C),l=c?.socialWindow,u.location.href=t;let e=setInterval(()=>{l?.closed&&!p&&(a(Error("Popup closed")),clearInterval(e))},1e3);window.addEventListener("message",h,!1)}else u?.close(),a(Error("Failed to initiate social connection"))}}catch{a(Error("Failed to initiate social connection")),u?.close()}}}()})},connectEmail:({closeModalOnConnect:e=!0,redirectViewOnModalClose:t="Connect",onOpen:a,onConnect:r})=>new Promise((n,o)=>{if(a?.(),t){let e=v.subscribeKey("open",a=>{a||(T.state.view!==t&&T.replace(t),e(),o(Error("Modal closed")))})}let s=ef.subscribeKey("activeCaipAddress",t=>{t&&(r?.(),e&&v.close(),s(),n(i.ParseUtil.parseCaipAddress(t)))})}),async updateEmail(){let e=g.StorageUtil.getConnectedConnectorId(ef.state.activeChain),t=L.getAuthConnector();if(!t)throw Error("No auth connector found");if(e!==o.ConstantsUtil.CONNECTOR_ID.AUTH)throw Error("Not connected to email or social");let a=t.provider.getEmail()??"";return await v.open({view:"UpdateEmailWallet",data:{email:a,redirectView:void 0}}),new Promise((e,r)=>{let n=setInterval(()=>{let r=t.provider.getEmail()??"";r!==a&&(v.close(),clearInterval(n),o(),e({email:r}))},1e3),o=v.subscribeKey("open",e=>{e||("Connect"!==T.state.view&&T.push("Connect"),clearInterval(n),o(),r(Error("Modal closed")))})})},canSwitchToSmartAccount:e=>ef.checkIfSmartAccountEnabled()&&(0,p.getPreferredAccountType)(e)===C.W3mFrameRpcConstants.ACCOUNT_TYPES.EOA};var W=e.i(988860);let x=(0,r.proxy)({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),F=(0,m.withErrorBoundary)({state:x,subscribe:e=>(0,r.subscribe)(x,()=>e(x)),setLastNetworkInView(e){x.lastNetworkInView=e},async fetchTransactions(e){if(!e)throw Error("Transactions can't be fetched without an accountAddress");x.loading=!0;try{let t=await d.BlockchainApiController.fetchTransactions({account:e,cursor:x.next,chainId:ef.state.activeCaipNetwork?.caipNetworkId}),a=F.filterSpamTransactions(t.data),r=F.filterByConnectedChain(a),n=[...x.transactions,...r];x.loading=!1,x.transactions=n,x.transactionsByYear=F.groupTransactionsByYearAndMonth(x.transactionsByYear,r),x.empty=0===n.length,x.next=t.next?t.next:void 0}catch(a){let t=ef.state.activeChain;A.EventsController.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:w.OptionsController.state.projectId,cursor:x.next,isSmartAccount:(0,p.getPreferredAccountType)(t)===C.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT}}),W.SnackController.showError("Failed to fetch transactions"),x.loading=!1,x.empty=!0,x.next=void 0}},groupTransactionsByYearAndMonth:(e={},t=[])=>(t.forEach(t=>{let a=new Date(t.metadata.minedAt).getFullYear(),r=new Date(t.metadata.minedAt).getMonth(),n=e[a]??{},o=(n[r]??[]).filter(e=>e.id!==t.id);e[a]={...n,[r]:[...o,t].sort((e,t)=>new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime())}}),e),filterSpamTransactions:e=>e.filter(e=>!e.transfers.every(e=>e.nft_info?.flags.is_spam===!0)),filterByConnectedChain(e){let t=ef.state.activeCaipNetwork?.caipNetworkId;return e.filter(e=>e.metadata.chain===t)},clearCursor(){x.next=void 0},resetTransactions(){x.transactions=[],x.transactionsByYear={},x.lastNetworkInView=void 0,x.loading=!1,x.empty=!1,x.next=void 0}},"API_ERROR"),H=(0,r.proxy)({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"}),K=(0,m.withErrorBoundary)({state:H,subscribe:e=>(0,r.subscribe)(H,()=>e(H)),subscribeKey:(e,t)=>(0,n.subscribeKey)(H,e,t),_getClient:()=>H._client,setClient(e){H._client=(0,r.ref)(e)},initialize(e){let t=e.filter(e=>!!e.namespace).map(e=>e.namespace);K.syncStorageConnections(t)},syncStorageConnections(e){let t=g.StorageUtil.getConnections();for(let a of e??Array.from(ef.state.chains.keys())){let e=t[a]??[],r=new Map(H.recentConnections);r.set(a,e),H.recentConnections=r}},getConnections:e=>e?H.connections.get(e)??[]:[],hasAnyConnection:e=>Array.from(K.state.connections.values()).flatMap(e=>e).some(({connectorId:t})=>t===e),async connectWalletConnect({cache:e="auto"}={}){let a=E.CoreHelperUtil.isTelegram()||E.CoreHelperUtil.isSafari()&&E.CoreHelperUtil.isIos();if("always"===e||"auto"===e&&a){if(t){await t,t=void 0;return}if(!E.CoreHelperUtil.isPairingExpired(H?.wcPairingExpiry)){let e=H.wcUri;H.wcUri=e;return}t=K._getClient()?.connectWalletConnect?.().catch(()=>void 0),K.state.status="connecting",await t,t=void 0,H.wcPairingExpiry=void 0,K.state.status="connected"}else await K._getClient()?.connectWalletConnect?.()},async connectExternal(e,t,a=!0){let r=await K._getClient()?.connectExternal?.(e);return a&&ef.setActiveNamespace(t),r},async reconnectExternal(e){await K._getClient()?.reconnectExternal?.(e);let t=e.chain||ef.state.activeChain;t&&L.setConnectorId(e.id,t)},async setPreferredAccountType(e,t){if(!t)return;v.setLoading(!0,ef.state.activeChain);let a=L.getAuthConnector();a&&(ef.setAccountProp("preferredAccountType",e,t),await a.provider.setPreferredAccount(e),g.StorageUtil.setPreferredAccountTypes(Object.entries(ef.state.chains).reduce((e,[t,a])=>{let r=(0,p.getPreferredAccountType)(t);return void 0!==r&&(e[t]=r),e},{})),await K.reconnectExternal(a),v.setLoading(!1,ef.state.activeChain),A.EventsController.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:ef.state.activeCaipNetwork?.caipNetworkId||""}}))},signMessage:async e=>K._getClient()?.signMessage(e),parseUnits:(e,t)=>K._getClient()?.parseUnits(e,t),formatUnits:(e,t)=>K._getClient()?.formatUnits(e,t),updateBalance:e=>K._getClient()?.updateBalance(e),sendTransaction:async e=>K._getClient()?.sendTransaction(e),getCapabilities:async e=>K._getClient()?.getCapabilities(e),grantPermissions:async e=>K._getClient()?.grantPermissions(e),walletGetAssets:async e=>K._getClient()?.walletGetAssets(e)??{},estimateGas:async e=>K._getClient()?.estimateGas(e),writeContract:async e=>K._getClient()?.writeContract(e),getEnsAddress:async e=>K._getClient()?.getEnsAddress(e),getEnsAvatar:async e=>K._getClient()?.getEnsAvatar(e),checkInstalled:e=>K._getClient()?.checkInstalled?.(e)||!1,resetWcConnection(){H.wcUri=void 0,H.wcPairingExpiry=void 0,H.wcLinking=void 0,H.recentWallet=void 0,H.status="disconnected",F.resetTransactions(),g.StorageUtil.deleteWalletConnectDeepLink(),g.StorageUtil.deleteRecentWallet()},resetUri(){H.wcUri=void 0,H.wcPairingExpiry=void 0,t=void 0},finalizeWcConnection(e){let{wcLinking:t,recentWallet:a}=K.state;t&&g.StorageUtil.setWalletConnectDeepLink(t),a&&g.StorageUtil.setAppKitRecent(a),e&&A.EventsController.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:t?"mobile":"qrcode",name:T.state.data?.wallet?.name||"Unknown",view:T.state.view,walletRank:a?.order}})},setWcBasic(e){H.wcBasic=e},setUri(e){H.wcUri=e,H.wcPairingExpiry=E.CoreHelperUtil.getPairingExpiry()},setWcLinking(e){H.wcLinking=e},setWcError(e){H.wcError=e,H.buffering=!1},setRecentWallet(e){H.recentWallet=e},setBuffering(e){H.buffering=e},setStatus(e){H.status=e},setIsSwitchingConnection(e){H.isSwitchingConnection=e},async disconnect({id:e,namespace:t,initialDisconnect:a}={}){try{await K._getClient()?.disconnect({id:e,chainNamespace:t,initialDisconnect:a})}catch(e){throw new m.AppKitError("Failed to disconnect","INTERNAL_SDK_ERROR",e)}},async disconnectConnector({id:e,namespace:t}){try{await K._getClient()?.disconnectConnector({id:e,namespace:t})}catch(e){throw new m.AppKitError("Failed to disconnect connector","INTERNAL_SDK_ERROR",e)}},setConnections(e,t){let a=new Map(H.connections);a.set(t,e),H.connections=a},async handleAuthAccountSwitch({address:e,namespace:t}){let a=ef.getAccountData(t),r=a?.user?.accounts?.find(e=>"smartAccount"===e.type),n=r&&r.address.toLowerCase()===e.toLowerCase()&&M.canSwitchToSmartAccount(t)?"smartAccount":"eoa";await K.setPreferredAccountType(n,t)},async handleActiveConnection({connection:e,namespace:t,address:a}){let r=L.getConnectorById(e.connectorId),n=e.connectorId===o.ConstantsUtil.CONNECTOR_ID.AUTH;if(!r)throw Error(`No connector found for connection: ${e.connectorId}`);if(n)n&&a&&await K.handleAuthAccountSwitch({address:a,namespace:t});else{let e=await K.connectExternal({id:r.id,type:r.type,provider:r.provider,address:a,chain:t},t);return e?.address}return a},async handleDisconnectedConnection({connection:e,namespace:t,address:a,closeModalOnConnect:r}){let n,s=L.getConnectorById(e.connectorId),i=e.auth?.name?.toLowerCase(),c=e.connectorId===o.ConstantsUtil.CONNECTOR_ID.AUTH,l=e.connectorId===o.ConstantsUtil.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw Error(`No connector found for connection: ${e.connectorId}`);if(c)if(i&&M.isSocialProvider(i)){let{address:e}=await M.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){v.open({view:"ConnectingFarcaster"})},onConnect(){T.replace("ProfileWallets")}});n=e}else{let{address:e}=await M.connectEmail({closeModalOnConnect:r,onOpen(){v.open({view:"EmailLogin"})},onConnect(){T.replace("ProfileWallets")}});n=e}else if(l){let{address:e}=await M.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(e){let t=e?"AllWallets":"ConnectingWalletConnect";v.state.open?T.push(t):v.open({view:t})},onConnect(){T.replace("ProfileWallets")}});n=e}else{let e=await K.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:t},t);e&&(n=e.address)}return c&&a&&await K.handleAuthAccountSwitch({address:a,namespace:t}),n},async switchConnection({connection:e,address:t,namespace:a,closeModalOnConnect:r,onChange:n}){let o,s=ef.getAccountData(a)?.caipAddress;if(s){let{address:e}=i.ParseUtil.parseCaipAddress(s);o=e}let c=D.getConnectionStatus(e,a);switch(c){case"connected":case"active":{let r=await K.handleActiveConnection({connection:e,namespace:a,address:t});if(o&&r){let e=r.toLowerCase()!==o.toLowerCase();n?.({address:r,namespace:a,hasSwitchedAccount:e,hasSwitchedWallet:"active"===c})}break}case"disconnected":{let o=await K.handleDisconnectedConnection({connection:e,namespace:a,address:t,closeModalOnConnect:r});o&&n?.({address:o,namespace:a,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw Error(`Invalid connection status: ${c}`)}}}),V={createBalance(e,t){let a={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:a.name,symbol:a.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:a.value,price:a.price,quantity:{decimals:a.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:a.decimals})},iconUrl:a.iconUrl}},convertHexToBalance:({hex:e,decimals:t})=>(0,l.formatUnits)(BigInt(e),t),convertAddressToCAIP10Address:(e,t)=>`${t}:${e}`,createCAIP2ChainId:(e,t)=>`${t}:${parseInt(e,16)}`,getChainIdHexFromCAIP2ChainId(e){let t=e.split(":");if(t.length<2||!t[1])return"0x0";let a=parseInt(t[1],10);return isNaN(a)?"0x0":`0x${a.toString(16)}`},isWalletGetAssetsResponse(e){return"object"==typeof e&&null!==e&&Object.values(e).every(e=>Array.isArray(e)&&e.every(e=>this.isValidAsset(e)))},isValidAsset:e=>"object"==typeof e&&null!==e&&"string"==typeof e.address&&"string"==typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"==typeof e.metadata&&null!==e.metadata&&"string"==typeof e.metadata.name&&"string"==typeof e.metadata.symbol&&"number"==typeof e.metadata.decimals&&"number"==typeof e.metadata.price&&"string"==typeof e.metadata.iconUrl};async function j(){if(!a){let{createPublicClient:t,http:r,defineChain:n}=await e.A(995256);a={createPublicClient:t,http:r,defineChain:n}}return a}let $={getBlockchainApiRpcUrl(e,t){let a=new URL("https://rpc.walletconnect.org/v1/");return a.searchParams.set("chainId",e),a.searchParams.set("projectId",t),a.toString()},async getViemChain(e){let{defineChain:t}=await j(),{chainId:a}=i.ParseUtil.parseCaipNetworkId(e.caipNetworkId);return t({...e,id:Number(a)})},async createViemPublicClient(e){let{createPublicClient:t,http:a}=await j(),r=w.OptionsController.state.projectId,n=await $.getViemChain(e);if(!n)throw Error(`Chain ${e.caipNetworkId} not found in viem/chains`);return t({chain:n,transport:a($.getBlockchainApiRpcUrl(e.caipNetworkId,r))})}},q={async getMyTokensWithBalance(e){let t=ef.getAccountData()?.address,a=ef.state.activeCaipNetwork,r=L.getConnectorId("eip155")===o.ConstantsUtil.CONNECTOR_ID.AUTH;if(!t||!a)return[];let n=`${a.caipNetworkId}:${t}`,s=g.StorageUtil.getBalanceCacheForCaipAddress(n);if(s)return s.balances;if(a.chainNamespace===o.ConstantsUtil.CHAIN.EVM&&r){let e=await this.getEIP155Balances(t,a);if(e)return this.filterLowQualityTokens(e)}let i=await d.BlockchainApiController.getBalance(t,a.caipNetworkId,e);return this.filterLowQualityTokens(i.balances)},async getEIP155Balances(e,t){try{let a=V.getChainIdHexFromCAIP2ChainId(t.caipNetworkId),r=await K.getCapabilities(e);if(!r?.[a]?.assetDiscovery?.supported)return null;let n=await K.walletGetAssets({account:e,chainFilter:[a]});if(!V.isWalletGetAssetsResponse(n))return null;let o=(n[a]||[]).map(e=>V.createBalance(e,t.caipNetworkId));return g.StorageUtil.updateBalanceCache({caipAddress:`${t.caipNetworkId}:${e}`,balance:{balances:o},timestamp:Date.now()}),o}catch(e){return null}},filterLowQualityTokens:e=>e.filter(e=>"0"!==e.quantity.decimals),async fetchERC20Balance({caipAddress:e,assetAddress:t,caipNetwork:a}){let r=await $.createViemPublicClient(a),{address:n}=i.ParseUtil.parseCaipAddress(e),[{result:o},{result:s},{result:d},{result:p}]=await r.multicall({contracts:[{address:t,functionName:"name",args:[],abi:c.erc20Abi},{address:t,functionName:"symbol",args:[],abi:c.erc20Abi},{address:t,functionName:"balanceOf",args:[n],abi:c.erc20Abi},{address:t,functionName:"decimals",args:[],abi:c.erc20Abi}]});return{name:o,symbol:s,decimals:p,balance:d&&p?(0,l.formatUnits)(d,p):"0"}}};e.s(["SendController",()=>eu],213522);let G={RPC_ERROR_CODE:{USER_REJECTED_REQUEST:4001},PROVIDER_RPC_ERROR_NAME:{PROVIDER_RPC:"ProviderRpcError",USER_REJECTED_REQUEST:"UserRejectedRequestError"},isRpcProviderError(e){try{if("object"==typeof e&&null!==e){let t="string"==typeof e.message,a="number"==typeof e.code;return t&&a}return!1}catch{return!1}},isUserRejectedMessage:e=>e.toLowerCase().includes("user rejected")||e.toLowerCase().includes("user cancelled")||e.toLowerCase().includes("user canceled"),isUserRejectedRequestError:e=>G.isRpcProviderError(e)?e.code===G.RPC_ERROR_CODE.USER_REJECTED_REQUEST||G.isUserRejectedMessage(e.message):e instanceof Error&&G.isUserRejectedMessage(e.message)};class J extends Error{constructor(e,t){super(t.message,{cause:e}),this.name=G.PROVIDER_RPC_ERROR_NAME.PROVIDER_RPC,this.code=t.code}}class Y extends J{constructor(e){super(e,{code:G.RPC_ERROR_CODE.USER_REJECTED_REQUEST,message:"User rejected the request"}),this.name=G.PROVIDER_RPC_ERROR_NAME.USER_REJECTED_REQUEST}}e.s(["ErrorUtil",0,G,"UserRejectedRequestError",()=>Y],720004);var X="[big.js] ",z=X+"Invalid ",Q=z+"decimal places",Z=z+"rounding mode",ee=X+"Division by zero",et={},ea=void 0,er=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function en(e,t,a,r){var n=e.c;if(a===ea&&(a=e.constructor.RM),0!==a&&1!==a&&2!==a&&3!==a)throw Error(Z);if(t<1)r=3===a&&(r||!!n[0])||0===t&&(1===a&&n[0]>=5||2===a&&(n[0]>5||5===n[0]&&(r||n[1]!==ea))),n.length=1,r?(e.e=e.e-t+1,n[0]=1):n[0]=e.e=0;else if(t<n.length){if(r=1===a&&n[t]>=5||2===a&&(n[t]>5||5===n[t]&&(r||n[t+1]!==ea||1&n[t-1]))||3===a&&(r||!!n[0]),n.length=t,r){for(;++n[--t]>9;)if(n[t]=0,0===t){++e.e,n.unshift(1);break}}for(t=n.length;!n[--t];)n.pop()}return e}function eo(e,t,a){var r=e.e,n=e.c.join(""),o=n.length;if(t)n=n.charAt(0)+(o>1?"."+n.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)n="0"+n;n="0."+n}else if(r>0)if(++r>o)for(r-=o;r--;)n+="0";else r<o&&(n=n.slice(0,r)+"."+n.slice(r));else o>1&&(n=n.charAt(0)+"."+n.slice(1));return e.s<0&&a?"-"+n:n}et.abs=function(){var e=new this.constructor(this);return e.s=1,e},et.cmp=function(e){var t,a=this.c,r=(e=new this.constructor(e)).c,n=this.s,o=e.s,s=this.e,i=e.e;if(!a[0]||!r[0])return a[0]?n:r[0]?-o:0;if(n!=o)return n;if(t=n<0,s!=i)return s>i^t?1:-1;for(n=-1,o=(s=a.length)<(i=r.length)?s:i;++n<o;)if(a[n]!=r[n])return a[n]>r[n]^t?1:-1;return s==i?0:s>i^t?1:-1},et.div=function(e){var t=this.constructor,a=this.c,r=(e=new t(e)).c,n=this.s==e.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>1e6)throw Error(Q);if(!r[0])throw Error(ee);if(!a[0])return e.s=n,e.c=[e.e=0],e;var s,i,c,l,d,p=r.slice(),u=s=r.length,C=a.length,h=a.slice(0,s),g=h.length,m=e,f=m.c=[],w=0,E=o+(m.e=this.e-e.e)+1;for(m.s=n,n=E<0?0:E,p.unshift(0);g++<s;)h.push(0);do{for(c=0;c<10;c++){if(s!=(g=h.length))l=s>g?1:-1;else for(d=-1,l=0;++d<s;)if(r[d]!=h[d]){l=r[d]>h[d]?1:-1;break}if(l<0){for(i=g==s?r:p;g;){if(h[--g]<i[g]){for(d=g;d&&!h[--d];)h[d]=9;--h[d],h[g]+=10}h[g]-=i[g]}for(;!h[0];)h.shift()}else break}f[w++]=l?c:++c,h[0]&&l?h[g]=a[u]||0:h=[a[u]]}while((u++<C||h[0]!==ea)&&n--)return!f[0]&&1!=w&&(f.shift(),m.e--,E--),w>E&&en(m,E,t.RM,h[0]!==ea),m},et.eq=function(e){return 0===this.cmp(e)},et.gt=function(e){return this.cmp(e)>0},et.gte=function(e){return this.cmp(e)>-1},et.lt=function(e){return 0>this.cmp(e)},et.lte=function(e){return 1>this.cmp(e)},et.minus=et.sub=function(e){var t,a,r,n,o=this.constructor,s=this.s,i=(e=new o(e)).s;if(s!=i)return e.s=-i,this.plus(e);var c=this.c.slice(),l=this.e,d=e.c,p=e.e;if(!c[0]||!d[0])return d[0]?e.s=-i:c[0]?e=new o(this):e.s=1,e;if(s=l-p){for((n=s<0)?(s=-s,r=c):(p=l,r=d),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else for(a=((n=c.length<d.length)?c:d).length,s=i=0;i<a;i++)if(c[i]!=d[i]){n=c[i]<d[i];break}if(n&&(r=c,c=d,d=r,e.s=-e.s),(i=(a=d.length)-(t=c.length))>0)for(;i--;)c[t++]=0;for(i=t;a>s;){if(c[--a]<d[a]){for(t=a;t&&!c[--t];)c[t]=9;--c[t],c[a]+=10}c[a]-=d[a]}for(;0===c[--i];)c.pop();for(;0===c[0];)c.shift(),--p;return c[0]||(e.s=1,c=[p=0]),e.c=c,e.e=p,e},et.mod=function(e){var t,a=this,r=a.constructor,n=a.s,o=(e=new r(e)).s;if(!e.c[0])throw Error(ee);return(a.s=e.s=1,t=1==e.cmp(a),a.s=n,e.s=o,t)?new r(a):(n=r.DP,o=r.RM,r.DP=r.RM=0,a=a.div(e),r.DP=n,r.RM=o,this.minus(a.times(e)))},et.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},et.plus=et.add=function(e){var t,a,r,n=this.constructor;if(e=new n(e),this.s!=e.s)return e.s=-e.s,this.minus(e);var o=this.e,s=this.c,i=e.e,c=e.c;if(!s[0]||!c[0])return c[0]||(s[0]?e=new n(this):e.s=this.s),e;if(s=s.slice(),t=o-i){for(t>0?(i=o,r=c):(t=-t,r=s),r.reverse();t--;)r.push(0);r.reverse()}for(s.length-c.length<0&&(r=c,c=s,s=r),t=c.length,a=0;t;s[t]%=10)a=(s[--t]=s[t]+c[t]+a)/10|0;for(a&&(s.unshift(a),++i),t=s.length;0===s[--t];)s.pop();return e.c=s,e.e=i,e},et.pow=function(e){var t=this,a=new t.constructor("1"),r=a,n=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(z+"exponent");for(n&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return n?a.div(r):r},et.prec=function(e,t){if(e!==~~e||e<1||e>1e6)throw Error(z+"precision");return en(new this.constructor(this),e,t)},et.round=function(e,t){if(e===ea)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(Q);return en(new this.constructor(this),e+this.e+1,t)},et.sqrt=function(){var e,t,a,r=this.constructor,n=this.s,o=this.e,s=new r("0.5");if(!this.c[0])return new r(this);if(n<0)throw Error(X+"No square root");0===(n=Math.sqrt(+eo(this,!0,!0)))||n===1/0?((t=this.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new r(((n=Math.sqrt(t))==1/0?"5e":(n=n.toExponential()).slice(0,n.indexOf("e")+1))+o)):e=new r(n+""),o=e.e+(r.DP+=4);do a=e,e=s.times(a.plus(this.div(a)));while(a.c.slice(0,o).join("")!==e.c.slice(0,o).join(""))return en(e,(r.DP-=4)+e.e+1,r.RM)},et.times=et.mul=function(e){var t,a=this.constructor,r=this.c,n=(e=new a(e)).c,o=r.length,s=n.length,i=this.e,c=e.e;if(e.s=this.s==e.s?1:-1,!r[0]||!n[0])return e.c=[e.e=0],e;for(e.e=i+c,o<s&&(t=r,r=n,n=t,c=o,o=s,s=c),t=Array(c=o+s);c--;)t[c]=0;for(i=s;i--;){for(s=0,c=o+i;c>i;)s=t[c]+n[i]*r[c-i-1]+s,t[c--]=s%10,s=s/10|0;t[c]=s}for(s?++e.e:t.shift(),i=t.length;!t[--i];)t.pop();return e.c=t,e},et.toExponential=function(e,t){var a=this,r=a.c[0];if(e!==ea){if(e!==~~e||e<0||e>1e6)throw Error(Q);for(a=en(new a.constructor(a),++e,t);a.c.length<e;)a.c.push(0)}return eo(a,!0,!!r)},et.toFixed=function(e,t){var a=this,r=a.c[0];if(e!==ea){if(e!==~~e||e<0||e>1e6)throw Error(Q);for(a=en(new a.constructor(a),e+a.e+1,t),e=e+a.e+1;a.c.length<e;)a.c.push(0)}return eo(a,!1,!!r)},et[Symbol.for("nodejs.util.inspect.custom")]=et.toJSON=et.toString=function(){var e=this.constructor;return eo(this,this.e<=e.NE||this.e>=e.PE,!!this.c[0])},et.toNumber=function(){var e=+eo(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(X+"Imprecise conversion");return e},et.toPrecision=function(e,t){var a=this,r=a.constructor,n=a.c[0];if(e!==ea){if(e!==~~e||e<1||e>1e6)throw Error(z+"precision");for(a=en(new r(a),e,t);a.c.length<e;)a.c.push(0)}return eo(a,e<=a.e||a.e<=r.NE||a.e>=r.PE,!!n)},et.valueOf=function(){var e=this.constructor;if(!0===e.strict)throw Error(X+"valueOf disallowed");return eo(this,this.e<=e.NE||this.e>=e.PE,!0)};var es=function e(){function t(a){if(!(this instanceof t))return a===ea?e():new t(a);if(a instanceof t)this.s=a.s,this.e=a.e,this.c=a.c.slice();else{if("string"!=typeof a){if(!0===t.strict&&"bigint"!=typeof a)throw TypeError(z+"value");a=0===a&&1/a<0?"-0":String(a)}!function(e,t){var a,r,n;if(!er.test(t))throw Error(z+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(a=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(a<0&&(a=r),a+=+t.slice(r+1),t=t.substring(0,r)):a<0&&(a=t.length),n=t.length,r=0;r<n&&"0"==t.charAt(r);)++r;if(r==n)e.c=[e.e=0];else{for(;n>0&&"0"==t.charAt(--n););for(e.e=a-r-1,e.c=[],a=0;r<=n;)e.c[a++]=+t.charAt(r++)}}(this,a)}this.constructor=t}return t.prototype=et,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();let ei={bigNumber:e=>new es(e?e:0),multiply(e,t){if(void 0===e||void 0===t)return new es(0);let a=new es(e),r=new es(t);return a.times(r)},toFixed:(e,t=2)=>void 0===e||""===e?new es(0).toFixed(t):new es(e).toFixed(t),formatNumberToLocalString:(e,t=2)=>void 0===e||""===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,roundingMode:"floor"}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t,roundingMode:"floor"}),parseLocalStringToNumber:e=>void 0===e||""===e?0:new es(e.replace(/,/gu,"")).toNumber()};e.s(["NumberUtil",0,ei],657256);let ec=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],el=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];e.s(["SwapApiUtil",()=>ed],728182);let ed={async getTokenList(e){let t=await d.BlockchainApiController.fetchSwapTokens({chainId:e});return t?.tokens?.map(e=>({...e,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]},async fetchGasPrice(){let e=ef.state.activeCaipNetwork;if(!e)return null;try{if("solana"!==e.chainNamespace)return await d.BlockchainApiController.fetchGasPrice({chainId:e.caipNetworkId});{let e=(await K?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:e,fast:e,instant:e}}}catch{return null}},async fetchSwapAllowance({tokenAddress:e,userAddress:t,sourceTokenAmount:a,sourceTokenDecimals:r}){let n=await d.BlockchainApiController.fetchSwapAllowance({tokenAddress:e,userAddress:t});if(n?.allowance&&a&&r){let e=K.parseUnits(a,r)||0;return BigInt(n.allowance)>=e}return!1},async getMyTokensWithBalance(e){let t=await q.getMyTokensWithBalance(e);return ef.setAccountProp("tokenBalance",t,ef.state.activeChain),this.mapBalancesToSwapTokens(t)},mapBalancesToSwapTokens:e=>e?.map(e=>({...e,address:e?.address?e.address:(0,p.getActiveNetworkTokenAddress)(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1}))||[],async handleSwapError(e){try{let t=e?.cause;if(!t?.json)return;let a=await t.json(),r=a?.reasons?.[0]?.description;if(r?.includes("insufficient liquidity"))return"Insufficient liquidity";return}catch{return}}},ep=(0,r.proxy)({tokenBalances:[],loading:!1}),eu=(0,m.withErrorBoundary)({state:ep,subscribe:e=>(0,r.subscribe)(ep,()=>e(ep)),subscribeKey:(e,t)=>(0,n.subscribeKey)(ep,e,t),setToken(e){e&&(ep.token=(0,r.ref)(e))},setTokenAmount(e){ep.sendTokenAmount=e},setReceiverAddress(e){ep.receiverAddress=e},setReceiverProfileImageUrl(e){ep.receiverProfileImageUrl=e},setReceiverProfileName(e){ep.receiverProfileName=e},setNetworkBalanceInUsd(e){ep.networkBalanceInUSD=e},setLoading(e){ep.loading=e},getSdkEventProperties:e=>({message:E.CoreHelperUtil.parseError(e),isSmartAccount:(0,p.getPreferredAccountType)(ef.state.activeChain)===C.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:ep.token?.symbol||"",amount:ep.sendTokenAmount??0,network:ef.state.activeCaipNetwork?.caipNetworkId||""}),async sendToken(){try{switch(eu.setLoading(!0),ef.state.activeCaipNetwork?.chainNamespace){case"eip155":await eu.sendEvmToken();return;case"solana":await eu.sendSolanaToken();return;default:throw Error("Unsupported chain")}}catch(e){if(G.isUserRejectedRequestError(e))throw new Y(e);throw e}finally{eu.setLoading(!1)}},async sendEvmToken(){let e=ef.state.activeChain;if(!e)throw Error("SendController:sendEvmToken - activeChainNamespace is required");let t=(0,p.getPreferredAccountType)(e);if(!eu.state.sendTokenAmount||!eu.state.receiverAddress)throw Error("An amount and receiver address are required");if(!eu.state.token)throw Error("A token is required");if(eu.state.token?.address){A.EventsController.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===C.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:eu.state.token.address,amount:eu.state.sendTokenAmount,network:ef.state.activeCaipNetwork?.caipNetworkId||""}});let{hash:e}=await eu.sendERC20Token({receiverAddress:eu.state.receiverAddress,tokenAddress:eu.state.token.address,sendTokenAmount:eu.state.sendTokenAmount,decimals:eu.state.token.quantity.decimals});e&&(ep.hash=e)}else{A.EventsController.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===C.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:eu.state.token.symbol||"",amount:eu.state.sendTokenAmount,network:ef.state.activeCaipNetwork?.caipNetworkId||""}});let{hash:e}=await eu.sendNativeToken({receiverAddress:eu.state.receiverAddress,sendTokenAmount:eu.state.sendTokenAmount,decimals:eu.state.token.quantity.decimals});e&&(ep.hash=e)}},async fetchTokenBalance(e){ep.loading=!0;let t=ef.state.activeChain,a=ef.state.activeCaipNetwork?.caipNetworkId,r=ef.state.activeCaipNetwork?.chainNamespace,n=ef.getAccountData(t)?.caipAddress??ef.state.activeCaipAddress,o=n?E.CoreHelperUtil.getPlainAddress(n):void 0;if(ep.lastRetry&&!E.CoreHelperUtil.isAllowedRetry(ep.lastRetry,30*B.ConstantsUtil.ONE_SEC_MS))return ep.loading=!1,[];try{if(o&&a&&r){let e=await q.getMyTokensWithBalance();return ep.tokenBalances=e,ep.lastRetry=void 0,e}}catch(t){ep.lastRetry=Date.now(),e?.(t),W.SnackController.showError("Token Balance Unavailable")}finally{ep.loading=!1}return[]},fetchNetworkBalance(){if(0===ep.tokenBalances.length)return;let e=ed.mapBalancesToSwapTokens(ep.tokenBalances);if(!e)return;let t=e.find(e=>e.address===(0,p.getActiveNetworkTokenAddress)());t&&(ep.networkBalanceInUSD=t?ei.multiply(t.quantity.numeric,t.price).toString():"0")},async sendNativeToken(e){T.pushTransactionStack({});let t=e.receiverAddress,a=ef.getAccountData()?.address,r=K.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),n=await K.sendTransaction({chainNamespace:o.ConstantsUtil.CHAIN.EVM,to:t,address:a,data:"0x",value:r??BigInt(0)});return A.EventsController.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:(0,p.getPreferredAccountType)("eip155")===C.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:eu.state.token?.symbol||"",amount:e.sendTokenAmount,network:ef.state.activeCaipNetwork?.caipNetworkId||"",hash:n||""}}),K._getClient()?.updateBalance("eip155"),eu.resetSend(),{hash:n}},async sendERC20Token(e){T.pushTransactionStack({onSuccess(){T.replace("Account")}});let t=K.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),a=ef.getAccountData()?.address;if(a&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){let r,n=E.CoreHelperUtil.getPlainAddress(e.tokenAddress);if(!n)throw Error("SendController:sendERC20Token - tokenAddress is required");let s=await K.writeContract({fromAddress:a,tokenAddress:n,args:[e.receiverAddress,t??BigInt(0)],method:"transfer",abi:(r=n,o.ConstantsUtil.USDT_CONTRACT_ADDRESSES.includes(r)?el:ec),chainNamespace:o.ConstantsUtil.CHAIN.EVM});return A.EventsController.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:(0,p.getPreferredAccountType)("eip155")===C.W3mFrameRpcConstants.ACCOUNT_TYPES.SMART_ACCOUNT,token:eu.state.token?.symbol||"",amount:e.sendTokenAmount,network:ef.state.activeCaipNetwork?.caipNetworkId||"",hash:s||""}}),eu.resetSend(),{hash:s}}return{hash:void 0}},async sendSolanaToken(){let e;if(!eu.state.sendTokenAmount||!eu.state.receiverAddress)throw Error("An amount and receiver address are required");T.pushTransactionStack({onSuccess(){T.replace("Account")}}),eu.state.token&&eu.state.token.address!==B.ConstantsUtil.SOLANA_NATIVE_TOKEN_ADDRESS&&(e=E.CoreHelperUtil.isCaipAddress(eu.state.token.address)?E.CoreHelperUtil.getPlainAddress(eu.state.token.address):eu.state.token.address);let t=await K.sendTransaction({chainNamespace:"solana",tokenMint:e,to:eu.state.receiverAddress,value:eu.state.sendTokenAmount});t&&(ep.hash=t),K._getClient()?.updateBalance("solana"),eu.resetSend()},resetSend(){ep.token=void 0,ep.sendTokenAmount=void 0,ep.receiverAddress=void 0,ep.receiverProfileImageUrl=void 0,ep.receiverProfileName=void 0,ep.loading=!1,ep.tokenBalances=[]}}),eC={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},eh={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},eg=(0,r.proxy)({chains:(0,n.proxyMap)(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),em={state:eg,subscribe:e=>(0,r.subscribe)(eg,()=>{e(eg)}),subscribeKey:(e,t)=>(0,n.subscribeKey)(eg,e,t),subscribeAccountStateProp(e,t,a){let r=a||eg.activeChain;return r?(0,n.subscribeKey)(eg.chains.get(r)?.accountState||{},e,t):()=>void 0},subscribeChainProp(e,t,a){let n;return(0,r.subscribe)(eg.chains,()=>{let r=a||eg.activeChain;if(r){let a=eg.chains.get(r)?.[e];n!==a&&(n=a,t(a))}})},initialize(e,t,a){let{chainId:n,namespace:o}=g.StorageUtil.getActiveNetworkProps(),s=t?.find(e=>e.id.toString()===n?.toString()),i=e.find(e=>e?.namespace===o)||e?.[0],c=e.map(e=>e.namespace).filter(e=>void 0!==e),l=new Set(w.OptionsController.state.enableEmbedded?[...c]:[...t?.map(e=>e.chainNamespace)??[]]);e?.length!==0&&i||(eg.noAdapters=!0),!eg.noAdapters&&(eg.activeChain=i?.namespace,eg.activeCaipNetwork=s,ef.setChainNetworkData(i?.namespace,{caipNetwork:s}),eg.activeChain&&y.set({activeChain:i?.namespace})),l.forEach(e=>{let n=t?.filter(t=>t.chainNamespace===e),o=g.StorageUtil.getPreferredAccountTypes()||{},s={...w.OptionsController.state.defaultAccountTypes,...o};ef.state.chains.set(e,{namespace:e,networkState:(0,r.proxy)({...eh,caipNetwork:n?.[0]}),accountState:(0,r.proxy)({...eC,preferredAccountType:s[e]}),caipNetworks:n??[],...a}),ef.setRequestedCaipNetworks(n??[],e)})},removeAdapter(e){if(eg.activeChain===e){let t=Array.from(eg.chains.entries()).find(([t])=>t!==e);if(t){let e=t[1]?.caipNetworks?.[0];e&&ef.setActiveCaipNetwork(e)}}eg.chains.delete(e)},addAdapter(e,{networkControllerClient:t,connectionControllerClient:a},r){if(!e.namespace)throw Error("ChainController:addAdapter - adapter must have a namespace");eg.chains.set(e.namespace,{namespace:e.namespace,networkState:{...eh,caipNetwork:r[0]},accountState:{...eC},caipNetworks:r,connectionControllerClient:a,networkControllerClient:t}),ef.setRequestedCaipNetworks(r?.filter(t=>t.chainNamespace===e.namespace)??[],e.namespace)},addNetwork(e){let t=eg.chains.get(e.chainNamespace);if(t){let a=[...t.caipNetworks||[]];t.caipNetworks?.find(t=>t.id===e.id)||a.push(e),eg.chains.set(e.chainNamespace,{...t,caipNetworks:a}),ef.setRequestedCaipNetworks(a,e.chainNamespace),L.filterByNamespace(e.chainNamespace,!0)}},removeNetwork(e,t){let a=eg.chains.get(e);if(a){let r=eg.activeCaipNetwork?.id===t,n=[...a.caipNetworks?.filter(e=>e.id!==t)||[]];r&&a?.caipNetworks?.[0]&&ef.setActiveCaipNetwork(a.caipNetworks[0]),eg.chains.set(e,{...a,caipNetworks:n}),ef.setRequestedCaipNetworks(n||[],e),0===n.length&&L.filterByNamespace(e,!1)}},setAdapterNetworkState(e,t){let a=eg.chains.get(e);a&&(a.networkState={...a.networkState||eh,...t},eg.chains.set(e,a))},setChainAccountData(e,t,a=!0){if(!e)throw Error("Chain is required to update chain account data");let r=eg.chains.get(e);if(r){let a={...r.accountState||eC,...t};eg.chains.set(e,{...r,accountState:a}),(1===eg.chains.size||eg.activeChain===e)&&t.caipAddress&&(eg.activeCaipAddress=t.caipAddress)}},setChainNetworkData(e,t){if(!e)return;let a=eg.chains.get(e);if(a){let r={...a.networkState||eh,...t};eg.chains.set(e,{...a,networkState:r})}},setAccountProp(e,t,a,r=!0){ef.setChainAccountData(a,{[e]:t},r)},setActiveNamespace(e){eg.activeChain=e;let t=e?eg.chains.get(e):void 0,a=t?.networkState?.caipNetwork;a?.id&&e&&(eg.activeCaipAddress=t?.accountState?.caipAddress,eg.activeCaipNetwork=a,ef.setChainNetworkData(e,{caipNetwork:a}),g.StorageUtil.setActiveCaipNetworkId(a?.caipNetworkId),y.set({activeChain:e,selectedNetworkId:a?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;let t=eg.activeChain===e.chainNamespace;t||ef.setIsSwitchingNamespace(!0);let a=eg.chains.get(e.chainNamespace);eg.activeChain=e.chainNamespace,eg.activeCaipNetwork=e,ef.setChainNetworkData(e.chainNamespace,{caipNetwork:e});let r=a?.accountState?.address;if(r)eg.activeCaipAddress=`${e.chainNamespace}:${e.id}:${r}`;else if(t&&eg.activeCaipAddress){let{address:t}=i.ParseUtil.parseCaipAddress(eg.activeCaipAddress);r=t,eg.activeCaipAddress=`${e.caipNetworkId}:${r}`}else eg.activeCaipAddress=void 0;ef.setChainAccountData(e.chainNamespace,{address:r,caipAddress:eg.activeCaipAddress}),eu.resetSend(),y.set({activeChain:eg.activeChain,selectedNetworkId:eg.activeCaipNetwork?.caipNetworkId}),g.StorageUtil.setActiveCaipNetworkId(e.caipNetworkId),ef.checkIfSupportedNetwork(e.chainNamespace)||!w.OptionsController.state.enableNetworkSwitch||w.OptionsController.state.allowUnsupportedChain||K.state.wcBasic||ef.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;let t=eg.chains.get(e.chainNamespace);t&&t?.caipNetworks?.push(e)},async switchActiveNamespace(e){if(!e)return;let t=e!==ef.state.activeChain,a=ef.getNetworkData(e)?.caipNetwork,r=ef.getCaipNetworkByNamespace(e,a?.id);t&&r&&await ef.switchActiveNetwork(r)},async switchActiveNetwork(e,{throwOnFailure:t=!1}={}){let a=ef.state.activeChain;if(!a)throw Error("ChainController:switchActiveNetwork - namespace is required");let r=ef.state.chains.get(a),n=!r?.caipNetworks?.some(e=>e.id===eg.activeCaipNetwork?.id),o=ef.getNetworkControllerClient(e.chainNamespace);if(o){try{await o.switchCaipNetwork(e),n&&v.close()}catch(e){if(t)throw e;T.goBack()}A.EventsController.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}})}},getNetworkControllerClient(e){let t=e||eg.activeChain;if(!t)throw Error("ChainController:getNetworkControllerClient - chain is required");let a=eg.chains.get(t);if(!a)throw Error("Chain adapter not found");if(!a.networkControllerClient)throw Error("NetworkController client not set");return a.networkControllerClient},getConnectionControllerClient(e){let t=e||eg.activeChain;if(!t)throw Error("Chain is required to get connection controller client");let a=eg.chains.get(t);if(!a?.connectionControllerClient)throw Error("ConnectionController client not set");return a.connectionControllerClient},getNetworkProp(e,t){let a=eg.chains.get(t)?.networkState;if(a)return a[e]},getRequestedCaipNetworks(e){let t=eg.chains.get(e),{approvedCaipNetworkIds:a=[],requestedCaipNetworks:r=[]}=t?.networkState||{};return E.CoreHelperUtil.sortRequestedNetworks(a,r).filter(e=>e?.id)},getAllRequestedCaipNetworks(){let e=[];return eg.chains.forEach(t=>{if(!t.namespace)throw Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");let a=ef.getRequestedCaipNetworks(t.namespace);e.push(...a)}),e},setRequestedCaipNetworks(e,t){ef.setAdapterNetworkState(t,{requestedCaipNetworks:e});let a=Array.from(new Set(ef.getAllRequestedCaipNetworks().map(e=>e.chainNamespace)));L.filterByNamespaces(a)},getAllApprovedCaipNetworkIds(){let e=[];return eg.chains.forEach(t=>{if(!t.namespace)throw Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");let a=ef.getApprovedCaipNetworkIds(t.namespace);e.push(...a)}),e},getActiveCaipNetwork:e=>e?eg.chains.get(e)?.networkState?.caipNetwork:eg.activeCaipNetwork,getActiveCaipAddress:()=>eg.activeCaipAddress,getApprovedCaipNetworkIds(e){let t=eg.chains.get(e);return t?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(e){let t=ef.getNetworkControllerClient(),a=await t?.getApprovedCaipNetworksData();ef.setAdapterNetworkState(e,{approvedCaipNetworkIds:a?.approvedCaipNetworkIds,supportsAllNetworks:a?.supportsAllNetworks})},checkIfSupportedNetwork(e,t){let a=t||eg.activeCaipNetwork?.caipNetworkId,r=ef.getRequestedCaipNetworks(e);return!r.length||r?.some(e=>e.caipNetworkId===a)},checkIfSupportedChainId(e){if(!eg.activeChain)return!0;let t=ef.getRequestedCaipNetworks(eg.activeChain);return t?.some(t=>t.id===e)},setSmartAccountEnabledNetworks(e,t){ef.setAdapterNetworkState(t,{smartAccountEnabledNetworks:e})},checkIfSmartAccountEnabled(){let e=s.NetworkUtil.caipNetworkIdToNumber(eg.activeCaipNetwork?.caipNetworkId),t=eg.activeChain;if(!t||!e)return!1;let a=ef.getNetworkProp("smartAccountEnabledNetworks",t);return!!a?.includes(Number(e))},showUnsupportedChainUI(){v.open({view:"UnsupportedChain"})},checkIfNamesSupported(){let e=eg.activeCaipNetwork;return!!(e?.chainNamespace&&B.ConstantsUtil.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){ef.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(e){if(!e)throw Error("Chain is required to set account prop");let t=ef.state.chains.get(e)?.accountState?.preferredAccountType,a=w.OptionsController.state.defaultAccountTypes[e];eg.activeCaipAddress=void 0,ef.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:a||t,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),L.removeConnectorId(e)},setIsSwitchingNamespace(e){eg.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){let e=[];if(eg.chains.forEach(t=>{o.ConstantsUtil.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>e===t.namespace)&&t.namespace&&e.push(t.namespace)}),e.length>0){let t=e[0];return t?eg.chains.get(t)?.caipNetworks?.[0]:void 0}},getAccountData(e){let t=e||eg.activeChain;if(t)return ef.state.chains.get(t)?.accountState},getNetworkData(e){let t=e||eg.activeChain;if(t)return ef.state.chains.get(t)?.networkState},getCaipNetworkByNamespace(e,t){if(!e)return;let a=ef.state.chains.get(e),r=a?.caipNetworks?.find(e=>e.id===t);return r||a?.networkState?.caipNetwork||a?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){let e=L.state.filterByNamespace;return(e?[eg.chains.get(e)]:Array.from(eg.chains.values())).flatMap(e=>e?.caipNetworks||[]).map(e=>e.caipNetworkId)},getCaipNetworks:e=>e?ef.getRequestedCaipNetworks(e):ef.getAllRequestedCaipNetworks(),getCaipNetworkById:(e,t)=>em.getCaipNetworks(t).find(t=>t.id.toString()===e.toString()||t.caipNetworkId.toString()===e.toString()),setLastConnectedSIWECaipNetwork(e){eg.lastConnectedSIWECaipNetwork=e},getLastConnectedSIWECaipNetwork:()=>eg.lastConnectedSIWECaipNetwork,async fetchTokenBalance(e){let t=ef.getAccountData();if(!t)return[];let a=ef.state.activeCaipNetwork?.caipNetworkId,r=ef.state.activeCaipNetwork?.chainNamespace,n=ef.state.activeCaipAddress,o=n?E.CoreHelperUtil.getPlainAddress(n):void 0;if(ef.setAccountProp("balanceLoading",!0,r),t.lastRetry&&!E.CoreHelperUtil.isAllowedRetry(t.lastRetry,30*B.ConstantsUtil.ONE_SEC_MS))return ef.setAccountProp("balanceLoading",!1,r),[];try{if(o&&a&&r){let e=await q.getMyTokensWithBalance();return ef.setAccountProp("tokenBalance",e,r),ef.setAccountProp("lastRetry",void 0,r),ef.setAccountProp("balanceLoading",!1,r),e}}catch(t){ef.setAccountProp("lastRetry",Date.now(),r),e?.(t),W.SnackController.showError("Token Balance Unavailable")}finally{ef.setAccountProp("balanceLoading",!1,r)}return[]},isCaipNetworkDisabled(e){let t=e.chainNamespace,a=!!ef.getAccountData(t)?.caipAddress,r=ef.getAllApprovedCaipNetworkIds(),n=!1!==ef.getNetworkProp("supportsAllNetworks",t),s=L.getConnectorId(t),i=L.getAuthConnector(),c=s===o.ConstantsUtil.CONNECTOR_ID.AUTH&&i;return!!a&&!n&&!c&&!r?.includes(e.caipNetworkId)}},ef=(0,m.withErrorBoundary)(em)}]);